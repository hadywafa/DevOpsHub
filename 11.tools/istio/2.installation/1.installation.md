# istio installation

## istio cli

```bash
# Download and execute the script
curl -L https://istio.io/downloadIstio | ISTIO_VERSION=1.26.3 sh -
# Move to the directory
cd istio-1.26.3
# Add to the path
export PATH=$PWD/bin:$PATH
```

```bash
istioctl version
# istioctl version 1.26.3
```

---

## istio profile components

1. default
2. demo
3. minimal
4. remote
5. empty
6. preview
7. ambient

![1764432818612](image/1.installation/1764432818612.png)

## istio installation (using istioctl)

```bash
istioctl install --set profile=default
```

### Automatic sidecar injection

```bash
kubectl label namespace <namespace> istio-injection=enabled
kubectl label namespace default istio-injection=enabled
```

```bash
kubectl get ns default --show-labels
# labels: istio-injection=enabled
```

> ðŸš¨ After enabled istio you need to restart your pod to make things applied as istio applied to new pods.

### Manual sidecar injection

```bash
istioctl kube-inject -f deployment.yaml | kubectl apply -f -
```

> ðŸš¨ This will enabled istio injection even namespace not labeled.

## istio installation (using helm)

```bash
helm repo add istio https://istio-release.storage.googleapis.com/charts
helm repo update

helm install istio-base istio/base --namespace istio-system --version 1.26.3 --create-namespace
helm install istiod istio/istiod --namespace istio-system --version 1.26.3-wait --create-namespace
helm install istio-ingress istio/gateway --namespace istio-system --version 1.26.3 --create-namespace
```

## istio cli useful commands

```bash
# validate
istioctl validate filename.yaml

# verify install
istioctl verify-install

# analyze all namespaces
istioctl analyze -A
```
