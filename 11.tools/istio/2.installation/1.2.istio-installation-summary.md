# istio installation

## ğŸ§‘ğŸ»â€ğŸ’» **istio cli**

```bash
# Download and execute the script
curl -L https://istio.io/downloadIstio | ISTIO_VERSION=1.26.3 sh -
# Move to the directory
cd istio-1.26.3
# Add to the path
export PATH=$PWD/bin:$PATH
```

```bash
istioctl version
# istioctl version 1.26.3
```

---

## ğŸ§© **istio profile components**

1. default
2. demo
3. minimal
4. remote
5. empty
6. preview
7. ambient

<div align="center" style="background-color:#fff; border-radius: 10px; border: 2px solid">
<img src="image/1764432818612.png" alt="istio installation" style="width: 80%">
</div>

---

## ğŸ…°ï¸ istio installation (sidecar mode)

### ğŸ§‘ğŸ»â€ğŸ’» using istioctl

```bash
istioctl install --set profile=default
```

### ğŸª– using helm

```bash
helm repo add istio https://istio-release.storage.googleapis.com/charts
helm repo update

helm install istio-base istio/base --namespace istio-system --version 1.26.3 --create-namespace
helm install istiod istio/istiod --namespace istio-system --version 1.26.3-wait --create-namespace
helm install istio-ingress istio/gateway --namespace istio-system --version 1.26.3 --create-namespace
```

---

### âœ… Enabling sidecar injection

**ğŸ”¹ Automatic sidecar injection:**

```bash
kubectl label namespace <namespace> istio-injection=enabled
kubectl label namespace default istio-injection=enabled
```

```bash
kubectl get ns default --show-labels
# labels: istio-injection=enabled
```

> ğŸš¨ After enabled istio you need to restart your pod to make things applied as istio applied to new pods.

**ğŸ”¹ Manual sidecar injection:**

```bash
istioctl kube-inject -f deployment.yaml | kubectl apply -f -
```

> ğŸš¨ This will enabled istio injection even namespace not labeled.

---

## ğŸ…±ï¸ istio installation (ambient mode)

### ğŸ§‘ğŸ»â€ğŸ’» istioctl

```bash
istioctl install --set profile=ambient
```

### ğŸª– Helm

```bash
helm repo add istio https://istio-release.storage.googleapis.com/charts
helm repo update

```

### âœ… Enabling ambient mode

you can enable all pods in a given namespace to be part of ambient mesh by simply labelling the namespace with:

```bash
kubectl label namespace <namespace> istio.io/dataplane-mode=ambient
```

---

## ğŸ‘œ **istio cli useful commands**

```bash
# validate
istioctl validate filename.yaml

# verify install
istioctl verify-install

# analyze all namespaces
istioctl analyze -A
```
