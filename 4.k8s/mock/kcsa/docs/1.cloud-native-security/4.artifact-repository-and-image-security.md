# ğŸ›¡ï¸ **Artifact Repository & Image Security**

The topic speaks about **how to securely manage container images throughout the software development lifecycle**, using a real-world scenario from Team Aâ€™s CRM application.  
Itâ€™s structured around a journey from containerization benefits to security pitfalls, and then to best practices for image hygiene and artifact storage.

## â‰ï¸ **Why Team A Chose Containerization**

Team A containerized their CRM application to unlock:

- âœ¨ **Portability**: Run anywhereâ€”cloud, on-prem, edge
- âœ¨ **Scalability**: Horizontal scaling with orchestration
- âœ¨ **Consistency**: Same image across dev, test, prod
- âœ¨ **Isolation**: Process and filesystem separation
- âœ¨ **Security**: Reduced host exposure, controlled runtime

> _Scenario visual_: CRM container lifecycle showing benefits like portability, isolation, and consistency.

<div align="center" style="background-color:#fff; border-radius: 10px; border: 2px solid">
  <img src="image/1761757609893.png" alt="4Cs of Cloud Native Security" style="width: 60%">
</div>

---

## âš ï¸ **The Pitfall: Untrusted Base Images**

Team A <u title="ØªØ³Ø±Ø¹ ÙÙ‰ Ù†Ø´Ø±">rushed</u> deployment using a `latest`-tagged image from Docker Hub without vetting its origin or patch status.

- âœ… Container launched successfully
- âŒ CRM <u title="ØªØ¯Ù‡ÙˆØ±Øª">degraded</u> over timeâ€”instability, performance issues
- ğŸ” Root cause: Unpatched CVEs in the base image

> _Visual cue_: Docker logo under magnifying glass labeled â€œKnown Vulnerabilitiesâ€ with a bug icon.

### ğŸ”¥ Why `latest` Is Dangerous

- Maintainers can reassign `latest` arbitrarily
- No guarantee of security patches
- False sense of freshness

```bash
# Not safe by default
docker pull nginx:latest
```

---

## ğŸ§ª **Mitigation: CI/CD Vulnerability Scanning**

Team A integrated automated image scanning into their pipeline:

### ğŸ” Trivy: Fast, Lightweight Scanner

```bash
trivy image --severity HIGH,CRITICAL team-a/crm:stable
```

### ğŸ§  Clair: Static Vulnerability Analysis

```bash
clair-scanner --ip $(hostname -I | awk '{print $1}') team-a/crm:stable
```

<div align="center" style="background-color: #141a19ff;color: #a8a5a5ff; border-radius: 10px; border: 2px solid">

| Scanner | Description               | Command Example                        |
| ------- | ------------------------- | -------------------------------------- |
| Trivy   | Lightweight, fast scanner | `trivy image <image>`                  |
| Clair   | Static analysis engine    | `clair-scanner --ip <host-ip> <image>` |

</div>

---

> _Visual_: Logos of Trivy and Clair with command snippets.

---

<div align="center" style="background-color:#fff; border-radius: 10px; border: 2px solid">
  <img src="image/1761758661614.png" alt="4Cs of Cloud Native Security" style="width: 60%">
</div>

---

## ğŸ§¼ **Remediation: Minimal, Official Base Images**

After remediating all discovered flaws, Team A switched to an officially maintained minimal image (Ubuntu or Alpine). This approach reduces the attack surface and ensures timely security updates.

**Minimal Official Base Images:**

- **Ubuntu (official)** or **Alpine (minimal)**
- Smaller attack surface
- Maintained by trusted vendors

> _Visual_: Ubuntu and Alpine logos under â€œMinimal Base Imageâ€

---

## ğŸ—³ï¸ **Understanding Build Artifacts**

Any output from your build processâ€”compiled **binaries**, **JAR/WAR files**, **logs**, **reports**, and especially **container images** â€” counts as a build artifact.

Artifacts include:

- Source code
- Compiled binaries
- JAR/WAR files
- Logs and reports
- **Container images**

> _Diagram_: Icons for each artifact type under â€œBuild Artifactâ€

---

## ğŸ—„ï¸ **Secure Image Storage: Artifact Repositories**

Securely managing container images requires a centralized artifact repository, which supports your CI/CD workflow and ensures consistent distribution.

<div align="center" style="background-color: #141a19ff;color: #a8a5a5ff; border-radius: 10px; border: 2px solid">

| Repository        | Access Control | Scanning | Image Signing |
| ----------------- | -------------- | -------- | ------------- |
| Docker Hub        | Basic          | âŒ       | âŒ            |
| Nexus Repository  | Fine-grained   | Add-on   | Limited       |
| GitHub Packages   | Fine-grained   | âœ…       | âœ…            |
| JFrog Artifactory | Fine-grained   | âœ…       | âœ…            |

</div>

---

> ğŸ”“ Docker Hub (Default, Limited): While Docker Hub is popular for hosting images, it has limited access controls and no built-in vulnerability scanning.

---

### ğŸ” Advanced Repositories

<div align="center" style="background-color:#fff; border-radius: 10px; border: 2px solid">
  <img src="image/1761758675918.png" alt="4Cs of Cloud Native Security" style="width: 60%">
</div>

For stricter compliance, consider:

- Nexus Repository (<https://www.sonatype.com/nexus-repository-oss>)
- GitHub Packages (<https://github.com/features/packages>)
- JFrog Artifactory (<https://jfrog.com/artifactory/>)

---

> ğŸ¸ JFrog Artifactory continuously scans stored images, integrates with vulnerability tools, and can enforce digital signatures to guarantee image authenticity.
>
> - Continuous scanning of stored images
> - Integration with Trivy, Clair, and others
> - Enforces **digital signatures** for authenticity

---

### ğŸ” Why Sign Images?

- Detect unauthorized modifications
- Strengthen supply chain integrity
- Ensure trusted provenance
