# âœ… **Correct Answer**

To satisfy the requirements:

1. **Docker must run under the `root` group**
2. **Docker must _not_ listen on any external TCP socket** â†’ only the default Unix socket `/var/run/docker.sock`
3. **The configuration must persist across restarts**

So hereâ€™s **what must be done** and **how you validate it** (the two questions at the bottom).

---

## âœ… **How to Configure Docker Correctly**

### **1ï¸âƒ£ Ensure Docker runs under the `root` group**

Default Docker installation already runs as:

- User: **root**
- Group: **root**

But you can enforce this by checking Dockerâ€™s systemd unit file:

```bash
sudo systemctl cat docker.service
```

Look for:

```Ù‡Ù‰Ù‡
[Service]
User=root
Group=root
```

If not present, create override:

```bash
sudo systemctl edit docker.service
```

Add:

```Ù‡Ù‰Ù‡
[Service]
User=root
Group=root
```

Reload:

```bash
sudo systemctl daemon-reload
sudo systemctl restart docker
```

---

### **2ï¸âƒ£ Prevent Docker from listening on external TCP ports**

Docker is secure _by default_ because it uses:

```ini
-H unix:///var/run/docker.sock
```

To enforce no external TCP access:

Edit:

```bash
sudo nano /etc/docker/daemon.json
```

Insert:

```json
{
  "hosts": ["unix:///var/run/docker.sock"]
}
```

This ensures Docker **never** listens on TCP (`2375`/`2376`).

Reload Docker:

```bash
sudo systemctl restart docker
```

Verify:

```bash
sudo ss -lntp | grep dockerd
```

Expected â†’ **no TCP ports listening**, only a Unix socket.

---

### **3ï¸âƒ£ Persistent Across Restarts**

- `daemon.json` persists automatically
- systemd override also persists

You are done âœ”ï¸

---

## ðŸ”µ **Now answer the two exam questions:**

### **Q1: Is docker modified to run as part of the `root` group?**

âœ… **YES** â€” Docker is explicitly configured to run under `User=root` and `Group=root`.

---

### **Q2: Has the docker daemon been modified to have no external TCP connections?**

âœ… **YES** â€” The daemon is restricted to the Unix socket only via:

```json
"hosts": ["unix:///var/run/docker.sock"]
```

Meaning: **No external TCP access is possible**.

---

## â­ **Final Exam-Friendly Response**

> **Yes. Docker has been configured to run as the `root` group and the Docker daemon has been restricted to listen only on the Unix socket, preventing all external TCP connections. The configuration is persistent across restarts.**
