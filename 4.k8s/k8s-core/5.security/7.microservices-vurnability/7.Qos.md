# ğŸ›ï¸ **Quality of Service (QoS) â€” The Big Picture**

Quality of Service simply means:

> **How Kubernetes guarantees or limits resources (CPU, memory, network, storage) for workloads.**

There are **4 types** of QoS you must understand:

1. **Pod QoS (Kubernetes built-in classification)**
2. **Compute QoS (CPU/MEM behavior using Requests/Limits)**
3. **Network QoS (Bandwidth shaping)**
4. **Storage QoS (IOPS / throughput limits)**

Letâ€™s break them down clearly.

---

## 1ï¸âƒ£ **POD QoS (OFFICIAL KUBERNETES QOS CLASSES)**

ğŸ’¡ _This is what Kubernetes uses to decide WHICH PODS TO EVICT first when resources run low._

There are **three** classes:

---

### ğŸ¥‡ **1. Guaranteed QoS**

**Condition:** Every container has _both_ CPU and Memory **requests = limits**.

```yaml
resources:
  requests:
    cpu: "500m"
    memory: "256Mi"
  limits:
    cpu: "500m"
    memory: "256Mi"
```

> âœ” Highest protection  
> âœ” Not evicted unless node is dying  
> âœ” Best for critical workloads

---

### ğŸ¥ˆ **2. Burstable QoS**

**Condition:** Requests are set, but requests â‰  limits
(or some limits are missing)

```yaml
resources:
  requests:
    cpu: "200m"
    memory: "100Mi"
  limits:
    cpu: "500m"
    memory: "300Mi"
```

> âœ” Guaranteed minimum resources  
> âœ” Can burst up to limit  
> âŒ Evicted before Guaranteed

---

### ğŸ¥‰ **3. BestEffort QoS**

**Condition:** No requests & no limits.

```yaml
resources: {}
```

> âœ” Uses leftover resources  
> âŒ Always first to be evicted  
> âœ” Good for batch/low priority jobs

---

### â­ **EVICTION PRIORITY**

```ini
BestEffort  â†’  Burstable  â†’  Guaranteed
```

---

## 2ï¸âƒ£ **COMPUTE QoS (CPU + MEMORY BEHAVIOR)**

This is NOT the same as Pod QoS.

Compute QoS defines **runtime behavior** using Requests & Limits.

---

### âš™ï¸ CPU QoS

| Setting         | Meaning                       |
| --------------- | ----------------------------- |
| **CPU Request** | Minimum guaranteed CPU        |
| **CPU Limit**   | Maximum CPU before throttling |

Example:

```yaml
resources:
  requests:
    cpu: "500m"
  limits:
    cpu: "1"
```

**Runtime effect:**

- Pod always gets **500m**
- Pod can use up to **1 CPU**
- Beyond 1 CPU â†’ **throttled**

---

### ğŸ§  MEMORY QoS

| Setting            | Meaning                         |
| ------------------ | ------------------------------- |
| **Memory Request** | Scheduling guarantee            |
| **Memory Limit**   | Hard cap (OOM kill if exceeded) |

Example:

```yaml
resources:
  requests:
    memory: "512Mi"
  limits:
    memory: "1Gi"
```

**Runtime effect:**

- Pod must have at least 512Mi available on its node
- Exceed 1Gi â†’ **OOMKilled**

---

## 3ï¸âƒ£ **NETWORK QoS (BANDWIDTH SHAPING)**

Kubernetes itself does NOT enforce network QoS,
but CNI plugins do (Calico, Cilium, OpenShift SDN).

---

<div align="center" style="background-color:#F1F1F1; border-radius: 10px; border: 2px solid">
<img src="image/1763487619957.png" alt="OpenSSL" style="width: 80%">
</div>

---

### ğŸ›ï¸ Example: Calico Bandwidth Limiting

```yaml
apiVersion: v1
kind: Pod
metadata:
  name: limited-net
  annotations:
    kubernetes.io/ingress-bandwidth: "10M"
    kubernetes.io/egress-bandwidth: "5M"
spec:
  containers:
    - name: app
      image: nginx
```

> âœ” Limits incoming traffic to **10 Mbps**  
> âœ” Limits outgoing traffic to **5 Mbps**

Under the hood, it uses Linux **tc** (traffic control).

---

## 4ï¸âƒ£ **STORAGE QoS (IOPS / THROUGHPUT)**

Implemented at **StorageClass level**, usually by cloud providers.

---

<div align="center" style="background-color:#F1F1F1; border-radius: 10px; border: 2px solid">
<img src="image/1763487719272.png" alt="OpenSSL" style="width: 80%">
</div>

---

### ğŸ’¾ Example: AWS EBS GP3 QoS

```yaml
apiVersion: storage.k8s.io/v1
kind: StorageClass
metadata:
  name: gp3-performance
parameters:
  type: gp3
  iops: "6000"
  throughput: "250"
```

> âœ” Controls disk speed  
> âœ” Helps isolate noisy neighbors  
> âœ” Useful for databases, Kafka, Elasticsearch

---

## ğŸ¯ **THE COMPLETE QOS MATRIX**

| QoS Type        | Purpose            | Who Controls It?         | Example                             |
| --------------- | ------------------ | ------------------------ | ----------------------------------- |
| **Pod QoS**     | Eviction priority  | kube-scheduler & kubelet | Guaranteed / Burstable / BestEffort |
| **Compute QoS** | CPU/memory shaping | Linux Cgroups            | CPU throttling / OOM                |
| **Network QoS** | Bandwidth shaping  | CNI plugins              | Limit ingress/egress                |
| **Storage QoS** | IOPS/throughput    | StorageClass / cloud     | GP3 IOPS = 6000                     |

---

## ğŸ§  SIMPLE VISUAL SUMMARY

```ini
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚           QoS Types           â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â”œâ”€â”€ Pod QoS (Eviction)
               â”‚     â”œ Guaranteed
               â”‚     â”œ Burstable
               â”‚     â”” BestEffort
               â”‚
               â”œâ”€â”€ Compute QoS (CPU/MEM)
               â”‚     â”œ CPU throttling
               â”‚     â”” Memory OOM cap
               â”‚
               â”œâ”€â”€ Network QoS
               â”‚     â”” Bandwidth limits
               â”‚
               â””â”€â”€ Storage QoS
                     â”” IOPS / throughput limits
```

---

## ğŸ‰ **DONE â€” Now itâ€™s clean, crisp, categorized, and exam-ready.**

If you want, I can generate a **1-page cheat-sheet diagram** summarizing all QoS categories (like your Azure ones).
