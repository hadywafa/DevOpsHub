# â‰ï¸ **Kubernetes Pod Command Execution** â€” Why `"sleep 1000"` Might Fail

## ğŸ”´ **Overview**

When running a pod with:

```bash
kubectl run test --image=busybox:1.28 -- "sleep 1000"
```

You might encounter:

```ini
runtime create failed: runc create failed: unable to start container process:
error during container init: exec: "sleep 1000": executable file not found in $PATH
```

This error stems from how Kubernetes interprets the command string inside the pod spec. Letâ€™s break it down.

---

## ğŸ§© **CLI vs YAML** â€” Command Interpretation

Kubernetes splits the command into two fields:

| CLI Input                        | YAML Interpretation                                 | Result   |
| -------------------------------- | --------------------------------------------------- | -------- |
| `-- sleep 1000`                  | `command: ["sleep"], args: ["1000"]`                | âœ… Works |
| `-- "sleep 1000"`                | `command: ["sleep 1000"]`                           | âŒ Fails |
| `-- nslookup po-test-resolver`   | `command: ["nslookup"], args: ["po-test-resolver"]` | âœ… Works |
| `-- "nslookup po-test-resolver"` | `command: ["nslookup po-test-resolver"]`            | âŒ Fails |

The second form fails because Kubernetes tries to execute `"sleep 1000"` as a single binary, which doesnâ€™t exist.

---

## ğŸ› ï¸ **Correct Pod YAML Structure**

Hereâ€™s how to define it properly in YAML:

```yaml
apiVersion: v1
kind: Pod
metadata:
  name: test
spec:
  containers:
    - name: test
      image: busybox:1.28
      command: ["sleep"]
      args: ["1000"]
```

Or for DNS testing:

```yaml
command: ["nslookup"]
args: ["po-test-resolver"]
```

---

## âœ… **Best Practices**

- Use `--restart=Never` for short-lived pods:

  ```bash
  kubectl run test --restart=Never --image=busybox:1.28 -- sleep 1000
  ```

- Avoid quoting the entire command unless youâ€™re using a shell:

  ```bash
  kubectl run test --rm -it --image=busybox:1.28 -- sh
  ```

- Test image capabilities interactively:

  ```bash
  which sleep
  ```

---

## ğŸ” Summary Table

| Image          | Includes `sleep`? | Notes                          |
| -------------- | ----------------- | ------------------------------ |
| `busybox:1.28` | âœ… Usually        | But command must be split      |
| `busybox`      | âœ… Yes            | Default tag includes utilities |
| `alpine`       | âœ… Yes            | Lightweight alternative        |

---

## ğŸ¯ Conclusion

- Kubernetes splits `command` and `args` â€” quoting the full string breaks execution.
- Kind clusters need explicit image loading via `kind load docker-image`.
- Always test image capabilities interactively before scripting pod specs.
- Use YAML or CLI with precision to avoid runtime errors.
