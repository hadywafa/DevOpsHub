# 🧭 **Helm Commands**

## 📖 **What is Helm**

> **Helm** = Kubernetes’ **package manager**, like `apt` or `npm` for Kubernetes manifests.

- It bundles YAML files into versioned **charts**.
- Charts can define **deployments, services, configmaps**, etc.
- You install charts into clusters as **releases**.
- You can **upgrade**, **rollback**, **uninstall**, and **template** them.

---

## ⚙️ **Helm Command Categories**

<div align="center" style="background-color: #141a19ff;color: #a8a5a5ff; border-radius: 10px; border: 2px solid">

| Category              | Purpose                                     | Examples                                                          |
| --------------------- | ------------------------------------------- | ----------------------------------------------------------------- |
| 🏗️ Chart Management   | Work with local or remote Helm charts       | `helm create`, `helm package`, `helm dependency`                  |
| 📦 Release Management | Install, upgrade, rollback, delete releases | `helm install`, `helm upgrade`, `helm rollback`, `helm uninstall` |
| 🧭 Repo Management    | Add/search/list repositories                | `helm repo add`, `helm repo update`, `helm search`                |
| 🔍 Inspection & Debug | View manifests, values, history, etc.       | `helm get`, `helm history`, `helm template`, `helm lint`          |
| 🔧 Maintenance        | Version, env, plugin management             | `helm version`, `helm env`, `helm plugin`                         |

</div>

---

## 🧑🏻‍💻 **Chart Management Commands**

### 🧰 `helm create <chart-name>`

**Creates a new Helm chart scaffold.**

🪄 **Example:**

```bash
helm create mywebapp
```

🧾 **What happens:**

- Creates directory `mywebapp/`
- Adds `Chart.yaml`, `values.yaml`, and `templates/`
- Contains a sample deployment, service, etc.

📁 **Structure:**

```ini
mywebapp/
├── Chart.yaml
├── values.yaml
├── templates/
│   ├── deployment.yaml
│   ├── service.yaml
│   └── _helpers.tpl
```

---

### 📦 `helm package <chart-dir>`

**Packages a chart directory into a `.tgz` file (ready to upload).**

```bash
helm package mywebapp/
```

🧾 Output:

```ini
Successfully packaged chart and saved it to: ./mywebapp-0.1.0.tgz
```

💡 Useful for:

- Distributing via repos (e.g., ArtifactHub, GitHub Pages)
- Version control

---

### 🔗 `helm dependency update`

**Fetches subchart dependencies listed in `Chart.yaml`.**

If your `Chart.yaml` has:

```yaml
dependencies:
  - name: redis
    version: 16.8.0
    repository: https://charts.bitnami.com/bitnami
```

Then run:

```bash
helm dependency update mywebapp/
```

🧾 This creates `charts/redis-16.8.0.tgz`.

---

## 📦 Release Management Commands

### 🚀 `helm install <release-name> <chart> [flags]`

**Installs a new release (deployment) in Kubernetes.**

🪄 **Example:**

```bash
helm install mywebapp ./mywebapp
```

🧾 Output:

```ini
NAME: mywebapp
NAMESPACE: default
STATUS: deployed
REVISION: 1
```

🧩 **Common Flags:**

| Flag               | Description                        |
| ------------------ | ---------------------------------- |
| `--namespace <ns>` | Deploy to specific namespace       |
| `--values <file>`  | Custom values file                 |
| `--set key=value`  | Override values inline             |
| `--dry-run`        | Simulate installation (no changes) |

---

### 🧬 `helm upgrade <release-name> <chart> [flags]`

**Upgrades an existing release (version bump or config change).**

```bash
helm upgrade mywebapp ./mywebapp --values prod-values.yaml
```

💡 **Tips:**

- Helm keeps revision history per release.
- Use `--install` to install if not already deployed (useful in CI/CD).

Example:

```bash
helm upgrade --install mywebapp ./mywebapp
```

---

### 🕐 `helm rollback <release-name> <revision>`

**Rolls back a release to a previous revision.**

```bash
helm rollback mywebapp 1
```

🧾 Helm shows:

```ini
Rollback was a success! Rev: 3
```

🧩 Combine with:

```bash
helm history mywebapp
```

To check revision numbers before rollback.

---

### 💣 `helm uninstall <release-name>`

**Removes a release (deletes all Kubernetes resources).**

```bash
helm uninstall mywebapp
```

🧾 Output:

```ini
release "mywebapp" uninstalled
```

> 💡 Add `--keep-history` to retain rollback info.

---

## 🧭 **Repo Management Commands**

### 🌍 `helm repo add <name> <url>`

**Add a Helm chart repository.**

```bash
helm repo add bitnami https://charts.bitnami.com/bitnami
```

🧾 Output:

```ini
"bitnami" has been added to your repositories
```

---

### 🔁 `helm repo update`

**Updates chart information (metadata) from all added repos.**

```bash
helm repo update
```

🧾 Output:

```ini
Hang tight while we grab the latest from your chart repositories...
Update Complete.
```

---

### 🔍 `helm search repo <keyword>`

**Searches charts in all repos.**

```bash
helm search repo redis
```

🧾 Example output:

```ini
bitnami/redis  16.8.0  Redis™ is an open source...
```

---

### 🌐 `helm search hub <keyword>`

**Searches charts on the global Helm Hub (ArtifactHub).**

```bash
helm search hub nginx
```

---

## 🔍 **Inspection & Debug Commands**

### 🧾 `helm get all <release>`

**Shows full manifest, values, hooks, and notes for a release.**

```bash
helm get all mywebapp
```

---

### 🧱 `helm get manifest <release>`

**View rendered YAML applied to Kubernetes.**

```bash
helm get manifest mywebapp
```

---

### ⚙️ `helm get values <release> [--all]`

**Displays values used for that release.**

```bash
helm get values mywebapp
```

Add `--all` to include defaults:

```bash
helm get values mywebapp --all
```

---

### 🕰️ `helm history <release>`

**Lists revision history of a release.**

```bash
helm history mywebapp
```

🧾 Example:

```ini
REVISION  UPDATED               STATUS     CHART          DESCRIPTION
1         2025-10-20 10:00:00   deployed   mywebapp-0.1.0 Initial install
2         2025-10-21 12:30:00   superseded mywebapp-0.2.0 Upgrade complete
```

---

### 🧠 `helm lint <chart>`

**Validates your chart for errors or bad structure.**

```bash
helm lint ./mywebapp
```

🧾 Output:

```ini
✅ 0 chart(s) linted, 0 chart(s) failed
```

---

### 🧩 `helm template <chart> [flags]`

**Renders templates locally into Kubernetes manifests (YAML).**

```bash
helm template ./mywebapp --values prod-values.yaml
```

💡 Great for:

- Debugging without touching cluster
- Seeing merged values and templates

---

## 🧰 **Maintenance Commands**

### 🧾 `helm version`

**Check your Helm client and server (Tiller) version.**

```bash
helm version
```

🧾 Output:

```ini
version.BuildInfo{Version:"v3.15.0", GitCommit:"...", GoVersion:"go1.21"}
```

---

### 🌱 `helm env`

**Prints Helm environment variables and paths.**

```bash
helm env
```

🧾 Example:

```ini
HELM_DATA_HOME="/home/user/.local/share/helm"
HELM_CACHE_HOME="/home/user/.cache/helm"
```

---

### 🧩 `helm plugin list / install / remove`

**Manage Helm plugins.**

```bash
helm plugin list
helm plugin install https://github.com/databus23/helm-diff
helm plugin remove diff
```

---

## 🧮 **Bonus: Common Helm Flags You’ll Use Daily**

<div align="center" style="background-color: #141a19ff;color: #a8a5a5ff; border-radius: 10px; border: 2px solid">

| Flag                 | Purpose                          | Example                                  |
| -------------------- | -------------------------------- | ---------------------------------------- |
| `--values` / `-f`    | Use custom values file           | `helm install app . -f prod-values.yaml` |
| `--set`              | Override a specific value inline | `--set image.tag=v2`                     |
| `--namespace` / `-n` | Specify namespace                | `-n production`                          |
| `--dry-run`          | Simulate                         | `helm upgrade app . --dry-run`           |
| `--debug`            | Show full debug info             | `helm install app . --debug`             |

</div>

---

## 🖼️ **Helm Workflow (Deploy to Kubernetes)**

<div align="center" style="background-color: #2b3436ff; border-radius: 10px; border: 2px solid">

```mermaid
flowchart LR
  A[Helm Chart] -->|Templates & Values| B[Render YAML]
  B -->|Apply to cluster| C[Kubernetes API Server]
  C --> D[Create Pods, Services, ConfigMaps]
  D --> E[Release stored in Helm storage (Secrets)]
```

</div>

---

## 💡 **Real-World Example (CI/CD Pipeline)**

```bash
# Add repo
helm repo add bitnami https://charts.bitnami.com/bitnami
helm repo update

# Install Redis
helm install redis bitnami/redis -n prod --set replica.replicaCount=2

# Upgrade config
helm upgrade redis bitnami/redis --set auth.password=secure123

# Rollback if failure
helm rollback redis 1
```

---

## 🏁 **Summary Table**

<div align="center" style="background-color: #141a19ff;color: #a8a5a5ff; border-radius: 10px; border: 2px solid">

| Command                       | Purpose                    |
| ----------------------------- | -------------------------- |
| `helm create`                 | Create chart skeleton      |
| `helm package`                | Package chart into `.tgz`  |
| `helm dependency update`      | Download subcharts         |
| `helm install`                | Deploy a new release       |
| `helm upgrade`                | Modify existing release    |
| `helm rollback`               | Revert to previous version |
| `helm uninstall`              | Remove release             |
| `helm repo add/update/search` | Manage repositories        |
| `helm get` / `helm history`   | Inspect releases           |
| `helm template`               | Render manifests locally   |
| `helm lint`                   | Validate chart             |
| `helm plugin`                 | Manage plugins             |

</div>

---

## 🧩 **Pro Tips for Interviews & Real Projects**

✅ Always use `--dry-run --debug` before deploying to avoid surprises.  
✅ Use `helm upgrade --install` in CI pipelines for idempotent deployments.  
✅ Manage secrets separately (e.g., via `External Secrets` or `sealed-secrets`).  
✅ Keep `values-prod.yaml`, `values-staging.yaml` per environment.  
✅ Combine `helm diff` plugin to preview changes between releases.
