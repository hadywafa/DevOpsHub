# ğŸ§­ **Helm Commands**

## ğŸ“– **What is Helm**

> **Helm** = Kubernetesâ€™ **package manager**, like `apt` or `npm` for Kubernetes manifests.

- It bundles YAML files into versioned **charts**.
- Charts can define **deployments, services, configmaps**, etc.
- You install charts into clusters as **releases**.
- You can **upgrade**, **rollback**, **uninstall**, and **template** them.

---

## âš™ï¸ **Helm Command Categories**

<div align="center" style="background-color: #141a19ff;color: #a8a5a5ff; border-radius: 10px; border: 2px solid">

| Category              | Purpose                                     | Examples                                                          |
| --------------------- | ------------------------------------------- | ----------------------------------------------------------------- |
| ğŸ—ï¸ Chart Management   | Work with local or remote Helm charts       | `helm create`, `helm package`, `helm dependency`                  |
| ğŸ“¦ Release Management | Install, upgrade, rollback, delete releases | `helm install`, `helm upgrade`, `helm rollback`, `helm uninstall` |
| ğŸ§­ Repo Management    | Add/search/list repositories                | `helm repo add`, `helm repo update`, `helm search`                |
| ğŸ” Inspection & Debug | View manifests, values, history, etc.       | `helm get`, `helm history`, `helm template`, `helm lint`          |
| ğŸ”§ Maintenance        | Version, env, plugin management             | `helm version`, `helm env`, `helm plugin`                         |

</div>

---

## ğŸ§‘ğŸ»â€ğŸ’» **Chart Management Commands**

### ğŸ§° `helm create <chart-name>`

**Creates a new Helm chart scaffold.**

ğŸª„ **Example:**

```bash
helm create mywebapp
```

ğŸ§¾ **What happens:**

- Creates directory `mywebapp/`
- Adds `Chart.yaml`, `values.yaml`, and `templates/`
- Contains a sample deployment, service, etc.

ğŸ“ **Structure:**

```ini
mywebapp/
â”œâ”€â”€ Chart.yaml
â”œâ”€â”€ values.yaml
â”œâ”€â”€ templates/
â”‚   â”œâ”€â”€ deployment.yaml
â”‚   â”œâ”€â”€ service.yaml
â”‚   â””â”€â”€ _helpers.tpl
```

---

### ğŸ“¦ `helm package <chart-dir>`

**Packages a chart directory into a `.tgz` file (ready to upload).**

```bash
helm package mywebapp/
```

ğŸ§¾ Output:

```ini
Successfully packaged chart and saved it to: ./mywebapp-0.1.0.tgz
```

ğŸ’¡ Useful for:

- Distributing via repos (e.g., ArtifactHub, GitHub Pages)
- Version control

---

### ğŸ”— `helm dependency update`

**Fetches subchart dependencies listed in `Chart.yaml`.**

If your `Chart.yaml` has:

```yaml
dependencies:
  - name: redis
    version: 16.8.0
    repository: https://charts.bitnami.com/bitnami
```

Then run:

```bash
helm dependency update mywebapp/
```

ğŸ§¾ This creates `charts/redis-16.8.0.tgz`.

---

## ğŸ“¦ Release Management Commands

### ğŸš€ `helm install <release-name> <chart> [flags]`

**Installs a new release (deployment) in Kubernetes.**

ğŸª„ **Example:**

```bash
helm install mywebapp ./mywebapp
```

ğŸ§¾ Output:

```ini
NAME: mywebapp
NAMESPACE: default
STATUS: deployed
REVISION: 1
```

ğŸ§© **Common Flags:**

| Flag               | Description                        |
| ------------------ | ---------------------------------- |
| `--namespace <ns>` | Deploy to specific namespace       |
| `--values <file>`  | Custom values file                 |
| `--set key=value`  | Override values inline             |
| `--dry-run`        | Simulate installation (no changes) |

---

### ğŸ§¬ `helm upgrade <release-name> <chart> [flags]`

**Upgrades an existing release (version bump or config change).**

```bash
helm upgrade mywebapp ./mywebapp --values prod-values.yaml
```

ğŸ’¡ **Tips:**

- Helm keeps revision history per release.
- Use `--install` to install if not already deployed (useful in CI/CD).

Example:

```bash
helm upgrade --install mywebapp ./mywebapp
```

---

### ğŸ• `helm rollback <release-name> <revision>`

**Rolls back a release to a previous revision.**

```bash
helm rollback mywebapp 1
```

ğŸ§¾ Helm shows:

```ini
Rollback was a success! Rev: 3
```

ğŸ§© Combine with:

```bash
helm history mywebapp
```

To check revision numbers before rollback.

---

### ğŸ’£ `helm uninstall <release-name>`

**Removes a release (deletes all Kubernetes resources).**

```bash
helm uninstall mywebapp
```

ğŸ§¾ Output:

```ini
release "mywebapp" uninstalled
```

> ğŸ’¡ Add `--keep-history` to retain rollback info.

---

## ğŸ§­ **Repo Management Commands**

### ğŸŒ `helm repo add <name> <url>`

**Add a Helm chart repository.**

```bash
helm repo add bitnami https://charts.bitnami.com/bitnami
```

ğŸ§¾ Output:

```ini
"bitnami" has been added to your repositories
```

---

### ğŸ” `helm repo update`

**Updates chart information (metadata) from all added repos.**

```bash
helm repo update
```

ğŸ§¾ Output:

```ini
Hang tight while we grab the latest from your chart repositories...
Update Complete.
```

---

### ğŸ” `helm search repo <keyword>`

**Searches charts in all repos.**

```bash
helm search repo redis
```

ğŸ§¾ Example output:

```ini
bitnami/redis  16.8.0  Redisâ„¢ is an open source...
```

---

### ğŸŒ `helm search hub <keyword>`

**Searches charts on the global Helm Hub (ArtifactHub).**

```bash
helm search hub nginx
```

---

## ğŸ” **Inspection & Debug Commands**

### ğŸ§¾ `helm get all <release>`

**Shows full manifest, values, hooks, and notes for a release.**

```bash
helm get all mywebapp
```

---

### ğŸ§± `helm get manifest <release>`

**View rendered YAML applied to Kubernetes.**

```bash
helm get manifest mywebapp
```

---

### âš™ï¸ `helm get values <release> [--all]`

**Displays values used for that release.**

```bash
helm get values mywebapp
```

Add `--all` to include defaults:

```bash
helm get values mywebapp --all
```

---

### ğŸ•°ï¸ `helm history <release>`

**Lists revision history of a release.**

```bash
helm history mywebapp
```

ğŸ§¾ Example:

```ini
REVISION  UPDATED               STATUS     CHART          DESCRIPTION
1         2025-10-20 10:00:00   deployed   mywebapp-0.1.0 Initial install
2         2025-10-21 12:30:00   superseded mywebapp-0.2.0 Upgrade complete
```

---

### ğŸ§  `helm lint <chart>`

**Validates your chart for errors or bad structure.**

```bash
helm lint ./mywebapp
```

ğŸ§¾ Output:

```ini
âœ… 0 chart(s) linted, 0 chart(s) failed
```

---

### ğŸ§© `helm template <chart> [flags]`

**Renders templates locally into Kubernetes manifests (YAML).**

```bash
helm template ./mywebapp --values prod-values.yaml
```

ğŸ’¡ Great for:

- Debugging without touching cluster
- Seeing merged values and templates

---

## ğŸ§° **Maintenance Commands**

### ğŸ§¾ `helm version`

**Check your Helm client and server (Tiller) version.**

```bash
helm version
```

ğŸ§¾ Output:

```ini
version.BuildInfo{Version:"v3.15.0", GitCommit:"...", GoVersion:"go1.21"}
```

---

### ğŸŒ± `helm env`

**Prints Helm environment variables and paths.**

```bash
helm env
```

ğŸ§¾ Example:

```ini
HELM_DATA_HOME="/home/user/.local/share/helm"
HELM_CACHE_HOME="/home/user/.cache/helm"
```

---

### ğŸ§© `helm plugin list / install / remove`

**Manage Helm plugins.**

```bash
helm plugin list
helm plugin install https://github.com/databus23/helm-diff
helm plugin remove diff
```

---

## ğŸ§® **Bonus: Common Helm Flags Youâ€™ll Use Daily**

<div align="center" style="background-color: #141a19ff;color: #a8a5a5ff; border-radius: 10px; border: 2px solid">

| Flag                 | Purpose                          | Example                                  |
| -------------------- | -------------------------------- | ---------------------------------------- |
| `--values` / `-f`    | Use custom values file           | `helm install app . -f prod-values.yaml` |
| `--set`              | Override a specific value inline | `--set image.tag=v2`                     |
| `--namespace` / `-n` | Specify namespace                | `-n production`                          |
| `--dry-run`          | Simulate                         | `helm upgrade app . --dry-run`           |
| `--debug`            | Show full debug info             | `helm install app . --debug`             |

</div>

---

## ğŸ–¼ï¸ **Helm Workflow (Deploy to Kubernetes)**

<div align="center" style="background-color: #2b3436ff; border-radius: 10px; border: 2px solid">

```mermaid
flowchart LR
  A[Helm Chart] -->|Templates & Values| B[Render YAML]
  B -->|Apply to cluster| C[Kubernetes API Server]
  C --> D[Create Pods, Services, ConfigMaps]
  D --> E[Release stored in Helm storage (Secrets)]
```

</div>

---

## ğŸ’¡ **Real-World Example (CI/CD Pipeline)**

```bash
# Add repo
helm repo add bitnami https://charts.bitnami.com/bitnami
helm repo update

# Install Redis
helm install redis bitnami/redis -n prod --set replica.replicaCount=2

# Upgrade config
helm upgrade redis bitnami/redis --set auth.password=secure123

# Rollback if failure
helm rollback redis 1
```

---

## ğŸ **Summary Table**

<div align="center" style="background-color: #141a19ff;color: #a8a5a5ff; border-radius: 10px; border: 2px solid">

| Command                       | Purpose                    |
| ----------------------------- | -------------------------- |
| `helm create`                 | Create chart skeleton      |
| `helm package`                | Package chart into `.tgz`  |
| `helm dependency update`      | Download subcharts         |
| `helm install`                | Deploy a new release       |
| `helm upgrade`                | Modify existing release    |
| `helm rollback`               | Revert to previous version |
| `helm uninstall`              | Remove release             |
| `helm repo add/update/search` | Manage repositories        |
| `helm get` / `helm history`   | Inspect releases           |
| `helm template`               | Render manifests locally   |
| `helm lint`                   | Validate chart             |
| `helm plugin`                 | Manage plugins             |

</div>

---

## ğŸ§© **Pro Tips for Interviews & Real Projects**

âœ… Always use `--dry-run --debug` before deploying to avoid surprises.  
âœ… Use `helm upgrade --install` in CI pipelines for idempotent deployments.  
âœ… Manage secrets separately (e.g., via `External Secrets` or `sealed-secrets`).  
âœ… Keep `values-prod.yaml`, `values-staging.yaml` per environment.  
âœ… Combine `helm diff` plugin to preview changes between releases.
