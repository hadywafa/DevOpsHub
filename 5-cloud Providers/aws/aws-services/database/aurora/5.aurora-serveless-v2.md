# ğŸŸ¢ğŸ”´ğŸŸ¢ **Amazon Aurora Serverless Version 2**

**Aurora Serverless v2** is a **hybrid auto-scaling** relational database that combines the flexibility of **serverless computing** with the full power of **provisioned Aurora clusters**. Unlike **Aurora Serverless v1**, which had limitations in scalability and feature support, **Serverless v2** provides near-instant **vertical scaling (VL)** and **horizontal scaling (HZ)** to support workloads of any size.

---

<div style="text-align: center;">
    <img src="images/aurora-serverless-v2.png" alt="Aurora Serverless Version 2" />
</div>

---

## **ğŸŒŸ Key Features of Aurora Serverless v2**

âœ… **Auto-Scaling Compute (Vertical & Horizontal) ğŸ“ˆ**  
âœ… **Supports MySQL & PostgreSQL** ğŸ’¾  
âœ… **TLS/SSL Encryption for Secure Connections** ğŸ”  
âœ… **Cluster Volume Encryption for Data at Rest** ğŸ”’  
âœ… **Cost-Efficient Pricing (Only Pay for Active Usage)** ğŸ’°  
âœ… **Supports RDS Proxy, Multi-AZ, and Global Databases** ğŸŒ  
âœ… **Seamless Failover with Multi-AZ Replication** ğŸš€

---

## **ğŸ“Œ How Aurora Serverless v2 Works**

Unlike traditional database clusters that require **manually adjusting instance sizes**, **Aurora Serverless v2** automatically adjusts resources **on demand** while maintaining **high availability and performance**.

**Scaling happens in two ways:**

1ï¸âƒ£ **Vertical Scaling (VL) ğŸš€** â†’ Increases/decreases **compute power (CPU & memory) dynamically** without downtime.  
2ï¸âƒ£ **Horizontal Scaling (HZ) ğŸ”„** â†’ Adds/removes **read replicas** to distribute high read workloads.

---

## **ğŸ›  Aurora Serverless v2 Use Cases**

ğŸ”¹ **Infrequent Applications** â€“ Websites or apps with unpredictable traffic.  
ğŸ”¹ **Development & Testing** â€“ Quickly spin up DB environments without provisioning limits.  
ğŸ”¹ **Multi-Tenant SaaS Applications** â€“ Dynamically scale based on customer activity.  
ğŸ”¹ **Event-Driven Workloads** â€“ Handles seasonal traffic spikes efficiently.  
ğŸ”¹ **Cost Optimization** â€“ Pay for only the resources you need, reducing over-provisioning.

## **ğŸ“Š Capacity Range**

Aurora Serverless is defined using **Aurora Capacity Units (ACUs)**, where:

- **1 ACU = 2 GiB of memory**, with corresponding CPU and networking resources.
- **Scaling from 0.5 to 128 ACUs**, allowing for fine-grained control over the compute resources used by the database.

---

## **1ï¸âƒ£ Vertical (VL) vs. Horizontal (HZ) Scaling in Aurora Serverless v2**

| **Scaling Type**            | **Aurora Serverless v2 Behavior**                                                             |
| --------------------------- | --------------------------------------------------------------------------------------------- |
| **Vertical Scaling (VL)**   | âœ… Aurora **dynamically adjusts compute power** (CPU/RAM) for the **same database instance**. |
| **Horizontal Scaling (HZ)** | âœ… Aurora **adds/removes read replicas** to handle read-heavy workloads.                      |

### **How Vertical Scaling Works (VL) in Aurora Serverless v2**

âœ” Aurora **dynamically increases or decreases CPU/RAM** based on demand.  
âœ” It **adjusts capacity in increments of ACUs (Aurora Capacity Units)** without restarting.  
âœ” Vertical scaling happens **within seconds** and avoids downtime.

#### **Example of Vertical Scaling**

- ğŸŸ¢ **Low traffic:** Aurora runs at **2 ACUs**.
- ğŸ”´ **Traffic spikes:** Aurora scales up to **16 ACUs** automatically.
- ğŸŸ¢ **Traffic drops:** Aurora scales back down to **4 ACUs**.

âœ… **VL Scaling = Adjusting compute capacity on the same writer instance.**  
ğŸš« **VL Scaling does NOT create new instances.**

---

### **How Horizontal Scaling Works (HZ) in Aurora Serverless v2**

âœ” Aurora **adds or removes read replicas** dynamically.  
âœ” Read replicas share the same **distributed storage layer** as the primary instance.  
âœ” Aurora **automatically distributes traffic across replicas** to improve performance.

#### **Example of Horizontal Scaling**

- ğŸŸ¢ **Low traffic:** 1 writer, 1 read replica.
- ğŸ”´ **High read demand:** Aurora **adds 3 more read replicas** dynamically.
- ğŸŸ¢ **Traffic drops:** Aurora **removes extra replicas** to save costs.

âœ… **HZ Scaling = Adding/removing read replicas dynamically to handle read workloads.**  
ğŸš« **HZ Scaling does NOT apply to the writer instance.**

---

## **2ï¸âƒ£ Does Aurora Serverless v2 Scale Write Instances or Read Instances?**

| **Scaling Type**            | **Write Instance (Primary)**                   | **Read Replicas**                                |
| --------------------------- | ---------------------------------------------- | ------------------------------------------------ |
| **Vertical Scaling (VL)**   | âœ… **Yes** (Increases compute for writes)      | âŒ **No** (Read replicas do not VL scale)        |
| **Horizontal Scaling (HZ)** | âŒ **No** (Primary instance does not HZ scale) | âœ… **Yes** (Read replicas scale out dynamically) |

ğŸ“Œ **Key Takeaways:**
âœ” **Writes scale vertically (VL)** â€“ Aurora **increases ACUs** but does NOT add more writer instances.  
âœ” **Reads scale horizontally (HZ)** â€“ Aurora **adds/removes read replicas** dynamically.  
âœ” **Multi-AZ still protects against failure, but it does NOT automatically scale writes.**

---

## **3ï¸âƒ£ What If the Write Instance Needs More Scaling?**

- Since Aurora **only has one writer per cluster**, it **cannot add another writer for scaling**.
- If a single writer **cannot handle the load**, you must:
  - Use **a bigger instance (VL scaling)**
  - Distribute the workload **across read replicas (HZ scaling)**
  - Consider **Aurora Global Database** for multi-region scaling.

---

---

## **ğŸ¤” Why Is Multi-AZ a Separate Option If Aurora Scales Horizontally?**

Aurora Serverless v2 **does not automatically promote read replicas to the writer role during failure.**

- **Without Multi-AZ enabled:** If the writer instance fails, the system has to **launch a new writer**, which takes time (~1 minute or more).
- **With Multi-AZ enabled:** There is an **existing standby replica** that can be **promoted instantly (~30 seconds failover time).**

### **What Happens If a Writer Fails?**

| **Scenario**               | **Without Multi-AZ**                                | **With Multi-AZ (Aurora Replica in a different AZ)**            |
| -------------------------- | --------------------------------------------------- | --------------------------------------------------------------- |
| **Primary (Writer) Fails** | ğŸš¨ New writer must be created, causing downtime.    | âœ… Standby replica is **instantly promoted** as the new writer. |
| **Read Replicas**          | âœ… Continue working but cannot take over as writer. | âœ… Continue working AND a new writer is instantly available.    |
| **Failover Time**          | âš ï¸ Takes **1+ minute** to create a new writer.      | âœ… Failover happens in **~30 seconds**.                         |

ğŸ“Œ **Key Takeaways:**  
âœ” **Read replicas (HZ scaling) do NOT automatically become a writer** unless Multi-AZ is enabled.  
âœ” **Multi-AZ explicitly creates a failover standby replica that can be promoted instantly.**  
âœ” **If you donâ€™t enable Multi-AZ, failure recovery is slower (~1 min+).**

---

## **âš™ï¸ Serverless v1 vs Serverless v2**

### **âŒ Serverless v1 Limitations**

- Aurora Global Databases are not supported.
- Multi-Master clusters are not supported.
- Aurora Replicas are not supported.
- Backtracking is not supported.
- Exporting snapshots to Amazon S3 is not supported.
- Multi-AZ clusters are not supported.
- RDS Proxy is not supported.

### **âœ”ï¸ Serverless v2 Enhancements**

- **Feature Parity with Provisioned Clusters**:  
  Serverless v2 now supports the same features as provisioned Aurora clusters, including global databases, Aurora replicas, and IAM DB authentication.

- **Faster Scaling**:  
  Aurora Serverless v2 scales much faster than v1, handling up to **100s of thousands of transactions per second** with rapid scaling, making it suitable for mission-critical applications and SaaS workloads.

- **Support for Multi-AZ Clusters**:  
  It now supports Multi-AZ deployment for higher availability and fault tolerance.

- **RDS Proxy Support**:  
  Serverless v2 integrates with **RDS Proxy**, allowing for connection pooling and improving application performance.

- **Global Databases**:  
  Aurora Global Databases are now supported, providing low-latency global reads and disaster recovery capabilities.

---

## **ğŸ¯ Final Answer: How Does Aurora Serverless v2 Scale?**

âœ” **Writes (Primary Instance) â†’ Vertical Scaling (VL) (ACUs up/down)**  
âœ” **Reads (Replicas) â†’ Horizontal Scaling (HZ) (Adds/removes replicas dynamically)**  
âœ” **Multi-AZ does NOT scale writesâ€”it only provides HA/failover.**

ğŸ”¥ **Aurora Serverless v2 = Vertical scaling for writes + Horizontal scaling for reads** ğŸš€
