# ğŸ—„ï¸ **Amazon Storage Gateway**

**Amazon Storage Gateway** is a **hybrid cloud storage service** that connects your **on-premises environments** to **AWS cloud storage**, enabling secure and seamless integration for backups, disaster recovery, archiving, and hybrid access to cloud data.

<div align="center" style="padding: 0 80px;">
    <img src="images/storage-gateway.png" alt="Storage Gateway" style="border-radius: 20px;"/>
</div>

---

<div align="center" style="padding: 0 80px;">
    <img src="images/aws-storage-gateway.png" alt="Storage Gateway" style="border-radius: 10px;"/>
</div>

---

## ğŸ”— What is Amazon Storage Gateway?

Amazon Storage Gateway provides your **on-premises applications** access to cloud-backed storage services like:

- ğŸª£ **Amazon S3** and **Amazon S3 Glacier** for object storage
- ğŸ’¾ **Amazon EBS** for block storage
- ğŸ—‚ï¸ **Amazon FSx** for managed Windows file systems

This is achieved via familiar interfaces like **NFS**, **SMB**, or **iSCSI**.

---

## ğŸš€ Deployment Options

### 1. ğŸ’» **Virtual Machine (VM)**

- âœ… Downloadable image from AWS
- ğŸ’¡ Deployable on VMware ESXi, Microsoft Hyper-V, or KVM

### 2. ğŸ“¦ **Hardware Appliance**

- ğŸšš Pre-installed by AWS
- ğŸ›¡ï¸ Supports SMB, NFS, and iSCSI depending on gateway type
- ğŸ”’ Secures data with HTTPS in transit and SSE-S3 at rest
- âš™ï¸ Efficient data transfer via compression and change-only sync

---

## âš™ï¸ Gateway Configurations

---

### ğŸ“‚ **S3 File Gateway**

**Use Case**: Bridge local file shares to **Amazon S3**

| Feature           | Description                                                       |
| ----------------- | ----------------------------------------------------------------- |
| ğŸ§© Interface      | Exposes **NFS/SMB** file shares                                   |
| ğŸ“ Access         | For Windows/Linux apps and AWS services                           |
| ğŸ”„ Local Cache    | Speeds up frequently accessed files                               |
| ğŸŒ S3 Integration | Supports lifecycle rules, CRR, versioning                         |
| ğŸ” Security       | Data is encrypted and compressed                                  |
| ğŸ§ª Access Mode    | Local apps write/read via SMB/NFS; AWS apps access via **S3 API** |

**Common Scenarios**:

- ğŸ“¤ File migration to S3
- ğŸ§¯ On-prem backup to cloud
- â˜ï¸ Cloud bursting of on-prem workloads

---

### ğŸ’¾ **Volume Gateway**

**Use Case**: Provide **block-level storage** over iSCSI

#### ğŸ—ƒï¸ Stored Volumes

- ğŸ–¥ï¸ Data resides **on-premises**
- ğŸ” Snapshots sent asynchronously to Amazon S3
- ğŸ” For backup, DR, and hybrid block access

#### â˜ï¸ Cached Volumes

- ğŸ’¡ Primary storage is **Amazon S3**
- ğŸš€ Frequently used data cached locally
- âœ… Useful for cost savings + fast access

| Feature            | Stored Volumes          | Cached Volumes                    |
| ------------------ | ----------------------- | --------------------------------- |
| ğŸ§  Primary Storage | Local                   | Cloud (S3)                        |
| ğŸ§© Interface       | iSCSI                   | iSCSI                             |
| ğŸ” Snapshots       | Yes, to S3              | Yes, to S3                        |
| âš¡ Performance     | High local access speed | Cost-effective, cache-accelerated |

---

### ğŸï¸ **Tape Gateway**

**Use Case**: Modernize traditional tape backup systems

| Feature                 | Description                                              |
| ----------------------- | -------------------------------------------------------- |
| ğŸ“¼ Virtual Tape Library | iSCSI-based VTL                                          |
| ğŸ—ƒï¸ Tape Storage         | Stored in Amazon S3                                      |
| â„ï¸ Archival             | Moved to **Amazon S3 Glacier** (as Virtual Tape Shelves) |
| ğŸ”’ Security             | HTTPS + data compression                                 |
| ğŸ“¦ Deployment           | On-prem or in EC2 for cloud-native backups               |

**Common Scenarios**:

- ğŸ§¯ Replace on-prem physical tape libraries
- ğŸ“š Long-term archive storage in Glacier

---

### ğŸ–¥ï¸ **FSx File Gateway**

**Use Case**: Accelerate access to **Amazon FSx for Windows**

| Feature        | Description                               |
| -------------- | ----------------------------------------- |
| ğŸ’¨ Local Cache | Caches frequently used FSx files locally  |
| ğŸ“ Protocol    | SMB                                       |
| ğŸ” Integration | Requires Direct Connect or VPN to join AD |
| ğŸ› ï¸ Deployment  | VM-based or hardware                      |

**Common Scenarios**:

- ğŸ¢ Windows file share for offices
- ğŸ’» Hybrid workloads with low-latency access

---

## âš–ï¸ Gateway Comparisons

---

### ğŸ”„ FSx File Gateway vs FSx for Windows

| Feature     | FSx File Gateway         | FSx for Windows (Direct)     |
| ----------- | ------------------------ | ---------------------------- |
| ğŸ§  Caching  | âœ… Yes                   | âŒ No                        |
| âš¡ Latency  | âœ… Optimized for on-prem | ğŸ” Depends on network        |
| ğŸ”Œ Network  | Requires DX/VPN          | Requires DX/VPN              |
| ğŸ›¡ï¸ Use Case | On-prem access with DR   | Directly mounted file system |

---

### ğŸšš Storage Gateway vs AWS DataSync

| Feature      | Storage Gateway              | AWS DataSync                      |
| ------------ | ---------------------------- | --------------------------------- |
| ğŸ§© Type      | Hybrid storage               | Bulk data transfer                |
| ğŸ” Direction | Ongoing 2-way                | One-time or scheduled             |
| ğŸ”— Protocols | SMB, NFS, iSCSI              | SMB, NFS, HDFS                    |
| ğŸ“ Access    | Persistent (NFS, iSCSI, SMB) | Temporary                         |
| âš¡ Speed     | Moderate                     | Up to 10x faster than traditional |
| ğŸ”„ Best For  | Backups, DR, hybrid          | Migrations, sync jobs             |

ğŸ§  **Tip**: Use **Storage Gateway** for long-term hybrid access and **DataSync** for fast, large data moves.

---

## ğŸ› ï¸ How It Works

### 1. ğŸ“¥ Deploy Gateway

- VM or physical appliance
- Hosted on-prem or in AWS

### 2. âš™ï¸ Configure

- Choose type: File, Volume, Tape
- Set NFS, SMB, or iSCSI interface

### 3. ğŸ”Œ Connect

- Mount volumes or file shares from clients
- Establish Direct Connect or VPN (for FSx & AD)

### 4. ğŸ”’ Secure & Monitor

- Uses **HTTPS** + **SSE-S3**
- View health and metrics in **AWS CloudWatch**

---

## ğŸ Summary

| âœ… Benefit                | ğŸ’¡ Description                         |
| ------------------------- | -------------------------------------- |
| ğŸ”— Seamless Hybrid Access | Connect on-prem data to AWS            |
| âš¡ Performance            | Local caching, async transfer          |
| ğŸ’¾ Data Protection        | Snapshots, backups, long-term archives |
| ğŸ” Security               | Encrypted in transit and at rest       |
| ğŸ’° Cost Efficiency        | S3/Glacier for low-cost tiering        |
| ğŸ”„ Flexible Options       | File, block, tape, FSx integration     |
