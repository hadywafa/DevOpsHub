# ğŸ”— **Amazon S3 Pre-Signed URLs**

Amazon S3 **Pre-Signed URLs** let you share **temporary, secure access** to your private S3 objects â€” without making them public or exposing your AWS credentials. Whether you're sharing a PDF download or allowing a user to upload a file directly to S3, this tool is a go-to for seamless and secure file access in your apps.

---

<div align="center">
  <img src="images/s3-pre-signed-url.gif" alt="Amazon S3 Pre-Signed URL" style="border-radius: 10px;" />
</div>

---

## ğŸ“Œ **What Is a Pre-Signed URL?**

A **Pre-Signed URL** is a **time-limited, signed request** generated using your AWS credentials that allows another party to perform a specific S3 operation (like GET or PUT) on a specific object â€” without needing their own AWS credentials.

### âœ… Key Benefits

| Feature                  | Description                                                          |
| ------------------------ | -------------------------------------------------------------------- |
| ğŸ” **Secure**            | Auth includes signature, so only the URL owner can access the object |
| â³ **Temporary**         | URL expires after the set time limit (from seconds to 7 days)        |
| ğŸ™Œ **Credential-Free**   | The recipient doesn't need AWS credentials or roles                  |
| ğŸ” **Upload & Download** | Can be used for both `PUT` (upload) and `GET` (download) operations  |

---

## ğŸ”’ **How It Works**

<div align="center">

```mermaid
sequenceDiagram
    participant Client as Web/Mobile Client
    participant Backend as App Server (Generates URL)
    participant S3 as Amazon S3 Bucket

    Client->>Backend: Request upload URL
    Backend->>S3: Generate Pre-Signed PUT URL
    S3-->>Backend: URL with Signature
    Backend-->>Client: Return URL

    Client->>S3: PUT file using URL
    S3-->>Client: 200 OK
```

</div>

---

1. You (the object owner) generate a **pre-signed URL** using AWS CLI, SDK, or Console.
2. The URL includes:
   - Your **Access Key ID**
   - An **expiry timestamp**
   - A **cryptographic signature**
3. You share that URL.
4. Anyone with the URL can now **upload/download** the object **until the expiration time**.

### ğŸ§  Behind the Scenes

S3 verifies:

- That the signature was created by someone with access
- That the URL hasnâ€™t expired
- That the operation (GET/PUT/etc.) is valid

If anything fails â†’ access is **denied**.

---

## ğŸ› ï¸ **Generating Pre-Signed URLs**

### ğŸ§‘â€ğŸ’» AWS Management Console

- 1ï¸âƒ£ **Navigate to the S3 Console:**
  - Log in to the [AWS Management Console](https://console.aws.amazon.com/s3/) and open the **S3** service.
- 2ï¸âƒ£ **Select the Object:**
  - Browse to your bucket and select the object you want to share.
- 3ï¸âƒ£ **Generate Pre-Signed URL:**

  - Click on the **"Share"** button or **"Actions"** dropdown.
  - Select **"Create Pre-Signed URL"**.
  - Set the **expiration time** for the URL.
  - Click **"Generate URL"**.

- 4ï¸âƒ£ **Share the URL:**
  - Copy the generated URL and share it with the intended recipients.

### ğŸ”§ AWS CLI

- 1ï¸âƒ£ Generate a Download Link (GET)

  ```bash
  aws s3 presign s3://my-bucket/file.txt --expires-in 3600
  ```

- 2ï¸âƒ£ Generate an Upload Link (PUT)

  ```bash
  aws s3 presign s3://my-bucket/file.txt --http-method PUT --expires-in 3600
  ```

  > ğŸ“ `--expires-in` is in **seconds**. Max is **7 days**.

---

### ğŸ Python (Boto3) â€“ SDK Example

- 1ï¸âƒ£ Upload (PUT)

  ```python
  import boto3

  client = boto3.client('s3')

  upload_url = client.generate_presigned_url(
      'put_object',
      Params={'Bucket': 'my-bucket', 'Key': 'my-folder/upload.txt'},
      ExpiresIn=3600
  )

  print(upload_url)
  ```

  > ğŸ’¡ Use `curl` or a frontend app to upload:

  ```bash
  curl -X PUT -T file.txt "<upload_url_here>"
  ```

- 2ï¸âƒ£ Download (GET)

  ```python
  download_url = client.generate_presigned_url(
      'get_object',
      Params={'Bucket': 'my-bucket', 'Key': 'my-folder/upload.txt'},
      ExpiresIn=900
  )

  print(download_url)
  ```

  > ğŸ’¬ â€œAnyone with this link can download the file within 15 minutes.â€

---

## ğŸ§° **Use Cases for Pre-Signed URLs**

| Scenario             | Description                                                                 |
| -------------------- | --------------------------------------------------------------------------- |
| ğŸ”½ User Download     | Share private file links for limited time (e.g., invoices, reports)         |
| ğŸ”¼ User Upload       | Let users upload files (profile images, CVs) without direct AWS access      |
| âš™ï¸ API File Transfer | Let Lambda or EC2 securely upload/download to S3 without static credentials |
| ğŸŒ Static Sites      | Securely provide downloadable assets in a JAMstack workflow                 |

---

## ğŸš¨ **Important Notes & Gotchas**

| Detail                     | Explanation                                                                |
| -------------------------- | -------------------------------------------------------------------------- |
| â° Max Expiration          | AWS CLI/SDK supports up to **7 days** expiration                           |
| ğŸ” Signature Type          | V4 signing process â€” uses credentials & secret to sign                     |
| ğŸ“¦ Object-Specific         | URL only works for **one object** and **one method** (GET or PUT)          |
| ğŸ§¾ Tied to Permissions     | The generator must have `s3:GetObject` or `s3:PutObject` on the target key |
| âŒ Not for Listing Buckets | Canâ€™t use pre-signed URLs to list files                                    |

---

## ğŸ’¡ **Best Practices**

- âœ… Keep URLs **short-lived** for security (usually 15 mins â€“ 1 hour)
- âœ… Never expose AWS credentials in frontend apps â€” use pre-signed URLs instead
- âœ… Use **CloudFront Signed URLs** if you need CDN + fine-grained control + HTTPS
- âœ… Monitor access with S3 **access logs** or **CloudTrail**

---

## ğŸ†š S3 Pre-Signed URL vs CloudFront Signed URL

| Feature                 | S3 Pre-Signed URL                         | CloudFront Signed URL                         |
| ----------------------- | ----------------------------------------- | --------------------------------------------- |
| ğŸ” Security Scope       | Specific S3 object                        | CloudFront distribution (any origin)          |
| ğŸŒ HTTPS Support        | Only for public buckets or via CloudFront | Native HTTPS via CloudFront                   |
| ğŸŒ Global Caching       | âŒ No CDN                                 | âœ… Yes â€“ CDN support                          |
| âš™ï¸ Fine-Grained Control | âŒ Limited                                | âœ… Expiry, IP range, geo, user-agent, cookies |
| ğŸ’¡ Use Case             | Temporary file upload/download            | Protect streaming, large files, global access |

---

## ğŸ§  TL;DR â€“ Why Pre-Signed URLs Rock

- You get **secure, temporary access** to a file in S3.
- You donâ€™t need to expose credentials or change bucket policies.
- Itâ€™s **fast**, **cheap**, and **easy to integrate**.

> âœ¨ Perfect for sharing private files â€” without ever making your S3 bucket public.
