# ğŸ’¸ **Amazon S3 Requester Pays**

> _Shift the cost of accessing S3 data to the people who request it._

---

## ğŸ“¦ **What is Requester Pays?**

Amazon S3 **Requester Pays** is a **cost allocation feature** that allows the **bucket owner** to **delegate data access charges** (like download costs) to the **person accessing the data**.

> âœ… Great for **public datasets**, research archives, and multi-user environments where the **owner stores**, but **others retrieve**.

---

<div align="center">
  <img src="images/s3-requester-pays.png" alt="S3 Requester Pays Concept" style="border-radius: 10px; max-width: 80%;">
</div>

---

## ğŸ§  **How It Works**

<div align="center">

```mermaid
sequenceDiagram
  participant Requester as Requester (IAM User)
  participant S3 as S3 Bucket with Requester Pays
  participant AWS as AWS Billing

  Requester->>S3: GET Object (with header x-amz-request-payer)
  S3-->>Requester: Returns object
  AWS-->>Requester: Charges request + transfer to requester's account
```

</div>

---

## ğŸ” **Key Concepts**

| Feature                    | Description                                                              |
| -------------------------- | ------------------------------------------------------------------------ |
| ğŸ“Š **Cost Shift**          | Requester pays for **data retrieval and requests**.                      |
| ğŸ›  **Storage Ownership**    | Bucket owner pays only for **storage**.                                  |
| ğŸ”’ **Secure Access**       | Only **authenticated** AWS users (IAM roles or access keys) can request. |
| â›” **No Anonymous Access** | You **cannot use** public anonymous access with requester pays.          |
| ğŸ”‘ **Header Required**     | All requests **must include** the `x-amz-request-payer` header.          |

---

## ğŸ› ï¸ **How to Enable Requester Pays**

### âœ… Enable via AWS Console

1. Go to your **S3 bucket** in the AWS Console.
2. Open the **Permissions** tab.
3. Scroll to **Requester Pays** and click **Edit**.
4. âœ… Enable the checkbox and save.

---

### âœ… Enable via AWS CLI

```bash
aws s3api put-bucket-request-payment \
  --bucket my-bucket-name \
  --request-payment-configuration '{"Payer":"Requester"}'
```

---

## ğŸ“¥ **How to Access Requester Pays Buckets**

All requests (GET, HEAD, LIST, etc.) must **explicitly state** theyâ€™re willing to pay:

### âœ… AWS CLI Example

```bash
aws s3api get-object \
  --bucket my-bucket-name \
  --key data/report.csv \
  --request-payer requester \
  report.csv
```

### âœ… Boto3 Example (Python)

```python
import boto3

s3 = boto3.client('s3')
response = s3.get_object(
    Bucket='my-bucket-name',
    Key='data/report.csv',
    RequestPayer='requester'
)
```

---

## ğŸ§¾ **Billing Breakdown**

| Who Pays?          | Cost Type                  |
| ------------------ | -------------------------- |
| ğŸ§â€â™‚ï¸ Requester       | â— GET, PUT, LIST requests |
| ğŸ§â€â™‚ï¸ Requester       | â— Data transfer OUT       |
| ğŸ§‘â€ğŸ’¼ Bucket Owner | âœ… Storage only            |

ğŸ’¡ **Use case**: You're a university hosting a **3 TB research dataset**. Instead of footing the bill for every download, **each student/researcher pays their own way**.

---

## ğŸ“Œ **Best Practices**

### ğŸ” Access Control

- Use **IAM policies** to restrict who can request data.
- Prevent abuse by requiring **specific roles or conditions**.

### ğŸ“‹ Documentation

- Inform your users that:
  - They **must be authenticated**
  - They **must include `x-amz-request-payer`** header

### ğŸ” Monitor Usage

- Track usage by enabling **S3 Access Logs**
- Use **AWS Billing reports** to break down charges by user/account

---

## ğŸ“ˆ **Real-World Use Cases**

| Use Case                       | Why Requester Pays Works                                                 |
| ------------------------------ | ------------------------------------------------------------------------ |
| ğŸ“š Academic Research Datasets  | Universities distribute large open datasets without paying for downloads |
| ğŸ›°ï¸ Satellite Imagery Providers | Government-funded S3 datasets shift transfer costs to users              |
| ğŸ® Game Patch Mirrors          | Gaming companies host static files; players pay to download              |
| ğŸ“¦ Public Archives / Open Data | NGOs or public sector institutions offload download traffic cost         |

---

## ğŸ§  Summary

| Feature                 | Benefit                                         |
| ----------------------- | ----------------------------------------------- |
| ğŸ’µ Cost Delegation      | Requesters pay for access, not the bucket owner |
| ğŸ” Controlled Sharing   | Only authenticated AWS users can access         |
| ğŸ§© Simple Integration   | Add a header â†’ you're good to go!               |
| ğŸ“ˆ Scales for Open Data | Great for public-but-controlled file sharing    |
