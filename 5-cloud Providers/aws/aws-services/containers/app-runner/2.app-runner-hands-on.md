# ğŸš€ How to Use AWS App Runner (Console + CLI Guide, 2025)

> _â€œDeploy from GitHub or a container. No servers. No YAML. Just go.â€_

---

## ğŸ“š What Is AWS App Runner?

**AWS App Runner** is a fully managed service that allows you to **deploy and scale web apps and APIs from source code or container images** â€” without managing servers, scaling rules, or load balancers.

---

## ğŸ§­ Overview: How App Runner Works

<div align="center">

```mermaid
flowchart TD
  Source["ğŸ“¦ Source Code / Container Image"]
  Build["ğŸ”§ App Runner Build/Deploy"]
  Deploy["ğŸš€ Auto Deployment"]
  LB["âš–ï¸ Managed Load Balancer"]
  HTTPS["ğŸ” HTTPS Endpoint"]
  Scale["ğŸ“ˆ Auto Scaling"]

  Source --> Build --> Deploy --> LB --> HTTPS
  Deploy --> Scale
```

</div>

---

## ğŸ› ï¸ 1ï¸âƒ£ Deploy from GitHub (Console)

### ğŸ”§ Step-by-Step (Console UI)

1. Go to [App Runner Console](https://console.aws.amazon.com/apprunner).
2. Click **Create service**.
3. Under **Source**, choose:
   - **Source type**: Code repository
   - **Provider**: GitHub
   - **Connect** your GitHub account and pick the repo
4. Configure:
   - **Branch**: e.g. `main`
   - **Runtime**: Node.js, Python, etc.
   - **Build command**: e.g. `npm install`
   - **Start command**: e.g. `npm run start`
5. Set environment variables (optional)
6. Name your service (e.g., `my-app-runner-service`)
7. Enable automatic deployments (optional)
8. Click **Next** â†’ Review â†’ Create Service âœ…

â±ï¸ In 60â€“90 seconds, App Runner gives you a live HTTPS endpoint!

---

## ğŸ“¦ 2ï¸âƒ£ Deploy from Container (Console)

1. Choose **Container registry** as the source.
2. Select:
   - **Amazon ECR** (public or private)
   - Choose image + tag
3. Configure:
   - **Port** your app listens on (e.g., 80 or 8080)
   - Set any **environment variables**
4. Click **Next**, review and deploy

ğŸ”¥ You can also enable auto-deploy from ECR (on new image push).

---

## ğŸ§° CLI Version: Deploy via Container (Amazon ECR)

You canâ€™t use CLI to deploy directly from source code, **only from container images**.

### ğŸ”§ Example: Create App Runner Service from ECR

```bash
aws apprunner create-service \
  --service-name my-ecr-app \
  --source-configuration file://source-config.json
```

#### ğŸ” `source-config.json`

```json
{
  "ImageRepository": {
    "ImageIdentifier": "123456789012.dkr.ecr.us-east-1.amazonaws.com/my-app:latest",
    "ImageRepositoryType": "ECR",
    "ImageConfiguration": {
      "Port": "8080",
      "RuntimeEnvironmentVariables": [
        {
          "Name": "NODE_ENV",
          "Value": "production"
        }
      ]
    }
  },
  "AutoDeploymentsEnabled": true,
  "AuthenticationConfiguration": {
    "AccessRoleArn": "arn:aws:iam::123456789012:role/AppRunnerECRAccessRole"
  }
}
```

> ğŸ§  Donâ€™t forget to attach `AmazonECRReadOnlyAccess` to that role.

---

## ğŸ” Update the Service (CLI)

```bash
aws apprunner update-service \
  --service-arn arn:aws:apprunner:us-east-1:123456789012:service/my-ecr-app/123abc \
  --source-configuration file://source-config.json
```

---

## ğŸ§¹ Delete the Service (Console or CLI)

### ğŸ”§ CLI

```bash
aws apprunner delete-service \
  --service-arn arn:aws:apprunner:us-east-1:123456789012:service/my-ecr-app/123abc
```

---

## ğŸ” Domain, VPC, IAM

### âœ… Custom Domain Mapping

```bash
aws apprunner associate-custom-domain \
  --service-arn <SERVICE_ARN> \
  --domain-name "api.myapp.com"
```

> Requires DNS verification (CNAME or TXT).

---

### ğŸ” Private Networking (VPC Connector)

If your app needs RDS, ElastiCache, etc.:

- Create VPC connector in the console
- Attach it to your App Runner service under **Network settings**

---

## ğŸ” Monitoring and Logs

- ğŸ“Š View **metrics** in **CloudWatch**
- ğŸ“„ Access logs under the â€œLogsâ€ tab in the console
- ğŸ¯ Filter by service name, deployment, or time

---

## âœ… Best Practices

| Area            | Tip                                                             |
| --------------- | --------------------------------------------------------------- |
| ğŸ” IAM Roles    | Use minimal privilege ECR + AppRunner roles                     |
| ğŸ§ª Environments | Tag services for `dev`, `staging`, `prod`                       |
| ğŸ§° Debugging    | Use health checks + logs to identify bad containers or commands |
| ğŸ”„ Deployment   | Enable auto-deploy + manual rollback in case of failure         |
| ğŸ§  Scale tuning | Default scaling is good â€” tune max concurrency if needed        |
| ğŸ§¼ Cleanup      | Delete unused services to avoid cost                            |

---

## ğŸ§  Summary

| Use Case                      | Use App Runner When Youâ€¦                                    |
| ----------------------------- | ----------------------------------------------------------- |
| From GitHub (No Infra Skills) | Want fastest way to deploy source code                      |
| From ECR                      | Already use Docker and CI/CD pipelines                      |
| Need HTTPS Out of the Box     | Want TLS without managing certs or ALBs                     |
| Focus on Dev, Not Infra       | Want to avoid Fargate, ECS tasks, IAM roles, load balancers |
| Need Scaling w/o Worry        | Want auto-scaling with no manual rules or alarms            |

---

## ğŸ“š Extra Resources

- [ğŸ“˜ App Runner Docs (AWS)](https://docs.aws.amazon.com/apprunner/)
- [ğŸ¥ Video: Deploy a Node.js App with App Runner](https://www.youtube.com/watch?v=xCGfQvYj6t8)
- [ğŸ§  App Runner Pricing](https://aws.amazon.com/apprunner/pricing/)
