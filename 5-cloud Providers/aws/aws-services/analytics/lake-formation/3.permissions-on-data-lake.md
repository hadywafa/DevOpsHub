# ğŸ›¡ï¸ğŸ” Permissions on AWS Lake Formation

_**How Fine-Grained Access Control Keeps Your Data Lake Safe**_

---

Lake Formation makes it **easy to build secure data lakes** on AWS, but how do you make sure **the right people access the right dataâ€”and nothing more**? ğŸ¤”

Welcome to **Lake Formation Permissions**â€”where you control who sees what, right down to the row and column level.

Letâ€™s dive into how this works, step by step ğŸš€

---

## ğŸ“– Official Definition

> **Lake Formation Permissions** let you control access to data stored in your AWS data lake (Amazon S3 + AWS Glue catalog), using both **resource-based access control** and **tag-based access control**.

---

## ğŸ§­ Permission Models in Lake Formation

Lake Formation supports **two models** of assigning permissions:

| Type                      | Description                                             | Example Use Case                    |
| ------------------------- | ------------------------------------------------------- | ----------------------------------- |
| **Named Resource Access** | Based on explicitly named databases/tables/columns/rows | Allow user A to read `sales_data`   |
| **LF-Tag-Based Access**   | Based on tags assigned to catalog resources (LF-Tags)   | Allow `HR_Team` to access `PII=yes` |

Letâ€™s explore each one in detail ğŸ”

---

## ğŸ§± 1. Named Data Catalog Resource Permissions

<div style="text-align: center"><img src="images/named-data-catalog-resources-permissions.png" style="border-radius: 10px" alt="Named Data Catalog Resources Permissions"></div>

---

This is the **traditional approach**: grant access by directly naming the resource (like a specific database or table).

### âœ… You Can Grant Access To

- A **Database**
- A specific **Table**
- Even specific **Columns**
- Even specific **Rows** (via data filters)

---

### ğŸ¯ Example: Column & Row-Level Access

Imagine this:

| Column         | Row A     | Row B     |
| -------------- | --------- | --------- |
| `customer_id`  | `123`     | `456`     |
| `email`        | `a@x.com` | `b@y.com` |
| `purchase_amt` | `$200`    | `$300`    |

Now letâ€™s say:

- Sales user can **only access** `customer_id` and `purchase_amt` _but not `email`_
- And only where `country = "US"`

Thatâ€™s called **Cell-Level Security** ğŸ§¬  
It's a combination of:

- **Column-level filtering**
- **Row-level filtering**

### ğŸ§ª Data Filter Example (Row-Level)

```sql
SELECT * FROM customer_data
WHERE country = 'US'
```

You define this filter as a **Data Filter** in Lake Formation.

### [Named Data Catalog resources Workshop](https://aws.amazon.com/blogs/big-data/part-1-effective-data-lakes-using-aws-lake-formation-implementing-cell-level-and-row-level-security/)

---

## ğŸ·ï¸ 2. LF-Tag Based Permissions (Recommended âœ…)

<div style="text-align: center"><img src="images/lf-tag-based-permissions.png" style="border-radius: 10px" alt="LF-Tag-Based Permissions"></div>

---

This is a **modern and dynamic** way of managing access.

### ğŸª„ Whatâ€™s an LF-Tag?

- A **key-value pair** like `Environment=Prod` or `Sensitivity=High`
- Can be applied to:
  - Databases
  - Tables
  - Columns

### ğŸ¯ Example

- Only allow access to tables where `Environment = Prod`
- Block access to columns tagged `GDPR=Yes`

---

### ğŸ›  How It Works

<div style="text-align: center;">

```mermaid
flowchart TD
  A[Define LF-Tags] --> B[Assign Tags to DB/Table/Column]
  B --> C[Create LF Permission Policies]
  C --> D[Grant Permission to IAM Role/User/Group]
  D --> E[Access Data - Athena, Redshift, etc.]
```

</div>

### [LF-Tag Based Permissions Workshop](https://aws.amazon.com/blogs/big-data/easily-manage-your-data-lake-at-scale-using-tag-based-access-control-in-aws-lake-formation/)

---

## ğŸ¥Š Named Resource Access ğŸ†š Tag-Based Access

| Feature                 | Tag-Based Access              | Named Resource Access      |
| ----------------------- | ----------------------------- | -------------------------- |
| Scalable Access Control | âœ… Yes                        | âŒ Manual per resource     |
| Dynamic Policy Updates  | âœ… Change tag, not policy     | âŒ Must update permissions |
| Row/Cell-level Security | âŒ Not supported              | âœ… Supported               |
| Best for                | Large orgs, multiple datasets | Fine-grained data control  |

---

## ğŸ“¦ Real-World Use Case

Letâ€™s say youâ€™re storing customer info and purchase data.  
You tag the `email` column as `GDPR=Yes`, and give your analytics team access only to `GDPR=No`.

This way, **they wonâ€™t even see** the restricted dataâ€”even if they query the table! ğŸ”’

---

## ğŸ§ª Example Scenario: Combining Both

Imagine your data lake contains:

- A `sales_db` database
- A `transactions` table
- Columns: `customer_id`, `amount`, `location`, `email`

ğŸ”¹ Use **Named Resource Access** to give:

- `FinanceTeam` â†’ full access to `transactions`

ğŸ”¹ Use **LF-Tags** to give:

- `AnalyticsTeam` â†’ access only to `GDPR=No` tagged columns

Now youâ€™ve **fully secured** your lake by role and need. ğŸ‘

---

## ğŸ“Œ Summary

| Feature                  | Description                                      |
| ------------------------ | ------------------------------------------------ |
| ğŸ§± Named Resource Access | Granular control (rows, columns, cells)          |
| ğŸ·ï¸ LF-Tag Access         | Dynamic, scalable access model                   |
| ğŸ›¡ï¸ Separation of Duties  | IAM Admin â‰  Data Lake Admin                      |
| ğŸ§‘â€ğŸ’¼ Personas           | Admin, Engineer, Analyst, etc.                   |
| ğŸ“Š Permissions           | Select, Describe, Alter, Drop, Grant (Granular!) |

---

## ğŸ§  Final Thoughts

Lake Formation takes your security game to the next level ğŸ¯  
Forget writing complex IAM and bucket policiesâ€”just **tag your data**, and **grant access like a boss** ğŸ’¼

Whether you're locking down PII, enabling external teams, or streamlining governance, **Lake Formation makes secure data lakes possible, at scale**.
