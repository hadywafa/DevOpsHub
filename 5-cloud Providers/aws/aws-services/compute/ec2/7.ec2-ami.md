# ğŸ“¦ **Amazon EC2 AMIs (Amazon Machine Images)**

Amazon EC2 **AMIs** are your go-to solution for creating reusable, consistent, and pre-configured templates of your compute environments. Think of an AMI as a **golden image** â€” a blueprint that includes the OS, software, and custom settings to help you quickly launch **identical EC2 instances** anywhere in your AWS ecosystem.

<div style="text-align: center">
  <img src="images/ec2-ami.png" alt="Creating EC2 AMIs" style="border-radius: 10px;" />
</div>

---

## ğŸ” **What Is an EC2 AMI?**

An **AMI (Amazon Machine Image)** is a **pre-packaged snapshot** of an EC2 instance that includes:

- ğŸ–¥ï¸ Operating System (e.g., Ubuntu, Amazon Linux, Windows)
- ğŸ“¦ Installed Software (e.g., agents, scripts, applications)
- âš™ï¸ Configuration settings and runtime customizations
- ğŸ’¾ One or more EBS snapshots (root and data volumes)

> âœ… Use AMIs to **quickly launch** new instances, ensure configuration consistency, and automate deployments at scale.

---

## ğŸ—ï¸ **Creating an AMI from an EC2 Instance**

### ğŸ§± **Step-by-Step Process**

1. **Launch & Customize** your EC2 instance

   - Install tools, patch OS, apply configs âœ…

2. **Reboot (Recommended)** to flush memory and stabilize disk state ğŸ”

3. **Create AMI**

   - AWS captures **snapshots of root & data volumes**
   - Registers the AMI in your account ğŸ¯

4. **Launch New Instances** from your AMI â€” done! ğŸ‰

### ğŸ§¾ **What's Included in the AMI?**

- Root volume snapshot
- All additional attached EBS volumes
- Installed software + OS + configurations

> ğŸ“¦ Everything your original instance had â€” cloned and ready to go!

---

## ğŸ”„ **Sharing AMIs with Other AWS Accounts**

### ğŸ¤ **How to Share an AMI**

If the AMI is **unencrypted**, sharing is simple. For **encrypted AMIs**, it involves careful handling of the KMS key:

```mermaid
sequenceDiagram
  participant You as Your Account
  participant KMS as KMS Key
  participant Snap as Encrypted AMI
  participant Friend as Recipient Account

  You->>KMS: Allow KMS usage (add recipient ID)
  You->>Snap: Share AMI with Friend (private mode)
  Friend->>Snap: Copy AMI to own account/region
  Friend->>KMS: Re-encrypt using their own key
  You-->>KMS: Revoke KMS access after copy
```

### ğŸ›¡ï¸ **Key Sharing Notes**

- ğŸ” Must use **custom KMS keys**, not AWS-managed ones
- ğŸ“ AMIs can only be **shared privately** â€” no public sharing for encrypted images
- ğŸ“¥ Copying is required before use in other accounts

<div style="text-align: center">
  <img src="images/sharing-ec2-ami.png" alt="Sharing Encrypted EC2 AMI" style="border-radius: 10px;" />
</div>

---

## ğŸ§³ **Copying AMIs Across Regions or Accounts**

AMIs can be copied to:

- âœ… Create regional backups
- âœ… Deploy the same stack globally
- âœ… Enable cross-account collaboration

### ğŸŒ **Cross-Region Copying**

- AWS **requires re-encryption** using a KMS key in the destination region
- Encrypted AMIs must use **region-local keys**

### ğŸš« **Limitations**

- âŒ Marketplace and Windows AMIs **canâ€™t be copied** directly
- âœ… Workaround: Launch instance â†’ create new AMI â†’ share new AMI instead

---

## ğŸ’¡ **Use Cases of EC2 AMIs**

| Use Case                      | Benefit                                       |
| ----------------------------- | --------------------------------------------- |
| Auto Scaling Launch Templates | Ensure consistent configs across groups ğŸ› ï¸    |
| CI/CD Pipelines               | Standardize test/stage/prod environments âš™ï¸   |
| Multi-Region Architecture     | Deploy apps globally with minimal overhead ğŸŒ |
| Disaster Recovery             | Restore instances from golden images ğŸ”       |

---

## ğŸ **Conclusion: Master Your Golden Image Game**

EC2 AMIs give you the power to:

- ğŸ“¦ Package everything once and launch anywhere
- ğŸš€ Accelerate deployment speed
- ğŸ›¡ï¸ Improve security through consistent baselines

Whether youâ€™re building at small scale or across global regions, mastering AMIs is a must-have skill for AWS engineers. ğŸ™Œ

> âœ¨ Keep them updated. Tag them wisely. Encrypt them smartly. Share them securely.
