# ğŸš€ **AWS SAM CLI â€“ The Ultimate Guide**

AWS **Serverless Application Model (SAM) CLI** is a **command-line tool** that simplifies the **building, testing, debugging, and deployment** of AWS serverless applications. It provides developers with a **local development environment** to simulate AWS services and manage their applications efficiently.

This guide covers:  
âœ… **What is AWS SAM CLI?**  
âœ… **Installing AWS SAM CLI**  
âœ… **Common AWS SAM CLI Commands**  
âœ… **Building, Testing, and Deploying with AWS SAM CLI**  
âœ… **Deleting AWS SAM Applications**  
âœ… **Troubleshooting AWS SAM CLI Issues**

---

## ğŸ”° **1. What is AWS SAM CLI?**

AWS **SAM CLI** is a **command-line interface (CLI)** that allows developers to:  
âœ” **Develop and test AWS Lambda functions locally**  
âœ” **Simulate API Gateway, DynamoDB, S3, and event sources**  
âœ” **Deploy serverless applications using AWS CloudFormation**  
âœ” **Monitor and debug AWS Lambda logs**  
âœ” **Integrate with CI/CD pipelines for automated deployments**

ğŸ“Œ **AWS SAM CLI enhances the AWS Lambda development experience by enabling local testing and quick deployments.**

---

## ğŸ›  **2. Installing AWS SAM CLI**

### âœ… **MacOS Installation**

Install using **Homebrew**:

```bash
brew install aws-sam-cli
```

### âœ… **Windows Installation**

Download and install from:  
ğŸ”— [AWS SAM CLI Windows Installer](https://docs.aws.amazon.com/serverless-application-model/latest/developerguide/install-sam-cli.html)

### âœ… **Linux Installation**

```bash
curl -Lo sam-install.sh https://raw.githubusercontent.com/aws/aws-sam-cli/main/installer/aws-sam-cli-linux.zip
unzip aws-sam-cli-linux.zip -d sam-install
sudo ./sam-install/install
```

### âœ… **Verify Installation**

After installation, verify SAM CLI is installed:

```bash
sam --version
```

ğŸ“Œ If installed correctly, you should see output like:

```plaintext
SAM CLI, version 1.x.x
```

---

## ğŸš€ **3. Common AWS SAM CLI Commands**

| Command               | Description                                          |
| --------------------- | ---------------------------------------------------- |
| `sam init`            | Initialize a new AWS SAM application.                |
| `sam build`           | Build your application and package dependencies.     |
| `sam local invoke`    | Invoke a Lambda function locally.                    |
| `sam local start-api` | Start a local API Gateway to test HTTP endpoints.    |
| `sam package`         | Package the application into a deployable format.    |
| `sam deploy`          | Deploy the application to AWS.                       |
| `sam logs`            | Fetch and filter logs for deployed Lambda functions. |
| `sam validate`        | Validate `template.yaml` syntax.                     |
| `sam delete`          | Delete an AWS SAM stack and clean up resources.      |

---

## ğŸ—ï¸ **4. Building, Testing, and Deploying with AWS SAM CLI**

### ğŸ”¹ **1ï¸âƒ£ Initialize a New AWS SAM Project**

Run:

```bash
sam init
```

ğŸ“Œ **Follow the prompts to create a new project.**

---

### ğŸ”¹ **2ï¸âƒ£ Build the Application**

Before deploying, **build the application**:

```bash
sam build
```

ğŸ“Œ **This compiles dependencies and prepares deployment artifacts.**

---

### ğŸ”¹ **3ï¸âƒ£ Test Locally (Invoke a Function)**

Run a Lambda function locally:

```bash
sam local invoke MyLambdaFunction
```

ğŸ“Œ Use `-e` to pass an event file:

```bash
sam local invoke MyLambdaFunction -e events/event.json
```

---

### ğŸ”¹ **4ï¸âƒ£ Start Local API Gateway**

To test API Gateway:

```bash
sam local start-api
```

ğŸ“Œ Access the API at:

```plaintext
http://127.0.0.1:3000/your-endpoint
```

---

### ğŸ”¹ **5ï¸âƒ£ Deploy to AWS**

First, configure `samconfig.toml`:

```bash
sam deploy --guided
```

Next time, deploy without prompts:

```bash
sam deploy
```

---

## ğŸ—‘ï¸ **5. Deleting AWS SAM Applications**

Since **AWS SAM applications are deployed using AWS CloudFormation**, deleting the **CloudFormation stack** will remove all associated resources.

### âœ… **Delete using AWS SAM CLI**

Run the following command to **delete the deployed stack**:

```bash
aws cloudformation delete-stack --stack-name my-sam-app
```

ğŸ“Œ Replace `my-sam-app` with your stack name.

### âœ… **Delete using AWS Console**

1ï¸âƒ£ Open the **AWS Management Console**  
2ï¸âƒ£ Navigate to **CloudFormation**  
3ï¸âƒ£ Find your stack (**e.g., my-sam-app**)  
4ï¸âƒ£ Click **Delete**

ğŸ“Œ AWS will delete all associated resources.

---

## ğŸ”„ **6. Cleaning Up Local AWS SAM Artifacts**

When you build and deploy an AWS SAM application, it creates **temporary local artifacts**. You can clean them up to free space.

### âœ… **Remove Build Artifacts**

Run:

```bash
sam build --clean
```

ğŸ“Œ This removes any **cached build artifacts**.

### âœ… **Remove Local `.aws-sam` Directory**

The **`.aws-sam/` directory** stores local build outputs.

```bash
rm -rf .aws-sam/
```

---

## ğŸ›  **7. Troubleshooting AWS SAM CLI Issues**

### âœ… **Check Docker Is Running**

If you get errors when running local tests:

```plaintext
Error: Docker is not running
```

Make sure **Docker is installed and running**.

### âœ… **Validate the AWS SAM Template**

Run:

```bash
sam validate
```

ğŸ“Œ This checks for **syntax errors** in `template.yaml`.

### âœ… **Debug with Logs**

Fetch logs for a deployed function:

```bash
sam logs -n MyLambdaFunction
```

---

## ğŸ¯ **8. Summary**

AWS SAM CLI is a **powerful tool** for managing serverless applications. With SAM CLI, developers can **test, debug, and deploy** AWS Lambda functions seamlessly.

### ğŸš€ **Next Steps**

âœ” Try **running AWS SAM locally**  
âœ” Deploy a **real-world AWS SAM application**  
âœ” Automate deployments with **CI/CD pipelines**

ğŸ“Œ **Master AWS SAM CLI and simplify your serverless development today!** ğŸ”¥
