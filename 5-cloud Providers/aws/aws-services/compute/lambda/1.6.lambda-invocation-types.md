# âš¡ **AWS Lambda Invocation Types â€“ The Good, The Fast & The Smart!**

AWS Lambda can be triggered in **three ways**, depending on how the event source interacts with it:

**1ï¸âƒ£ Synchronous (Fast & Furious Mode ğŸš—ğŸ’¨)** â†’ Caller **waits** for a response.  
**2ï¸âƒ£ Asynchronous (Fire & Forget ğŸ†)** â†’ Caller **does NOT wait**; AWS queues and retries.  
**3ï¸âƒ£ Poll-Based (The Watchful Guardian ğŸ‘€)** â†’ AWS **polls** an event source and invokes Lambda when new events appear.

---

<div style="text-align: center;">
    <img src="images/lambda-execution-models.png" alt="Lambda Execution Models" />
</div>

---

## ğŸ•’ **1. Synchronous Invocation â€“ "Fast & Furious Mode" ğŸš—ğŸ’¨**

ğŸ‘‰ **When you need an instant response!**

ğŸ’¡ **Example Scenario:**  
A user requests **real-time data** from an API, and your backend (Lambda) must **respond immediately**.

ğŸ”¹ **How It Works:**

1. A service (**API Gateway, Cognito, Load Balancer, CloudFront**) calls your Lambda function.
2. Lambda runs and **returns a response instantly**.
3. The caller **waits until Lambda completes processing**.

ğŸ¯ **Use Cases:**  
âœ… REST APIs (**API Gateway â†’ Lambda â†’ DynamoDB**)  
âœ… Chatbots & voice assistants (**Alexa â†’ Lambda**)  
âœ… Real-time data validation (**App â†’ Lambda â†’ RDS**)  
âœ… Authentication & Authorization (**Cognito â†’ Lambda â†’ Custom logic**)  
âœ… Content personalization & security (**CloudFront â†’ Lambda@Edge**)  
âœ… Service-to-service networking (**VPC Lattice â†’ Lambda**)

ğŸ› ï¸ **All AWS Services That Use Synchronous Invocation:**

| **Service**                         | **Description**                                                                   |
| ----------------------------------- | --------------------------------------------------------------------------------- |
| **Amazon API Gateway**              | Triggers Lambda for HTTP/REST API requests.                                       |
| **AWS SDK & CLI**                   | Directly invoke Lambda from applications.                                         |
| **Application Load Balancer (ALB)** | Uses Lambda as a backend for handling HTTP requests.                              |
| **AWS Step Functions**              | Calls Lambda in **synchronous workflows**.                                        |
| **Amazon Lex (Chatbots)**           | Uses Lambda for natural language processing.                                      |
| **Alexa Skills Kit**                | Calls Lambda for voice assistant interactions.                                    |
| **Amazon Cognito** ğŸ›¡ï¸               | Uses Lambda for authentication and authorization triggers.                        |
| **Amazon CloudFront** ğŸŒ            | Uses **Lambda@Edge** to process HTTP requests at edge locations.                  |
| **AWS VPC Lattice** ğŸ”—              | Uses Lambda as a backend target for handling service-to-service network requests. |

---

## ğŸ”„ **2. Asynchronous Invocation â€“ "Fire & Forget" ğŸ†**

ğŸ‘‰ **When you donâ€™t need an immediate response!**

ğŸ’¡ **Example Scenario:**  
A user uploads a file to **Amazon S3**, and you need Lambda to **process it later in the background**.

ğŸ”¹ **How It Works:**

1. The event source (**S3, SNS, EventBridge**) triggers Lambda.
2. AWS **queues the event** and **returns instantly** to the caller.
3. Lambda **processes the event asynchronously** (retries on failure).

ğŸ¯ **Use Cases:**  
âœ… Image & video processing (**S3 â†’ Lambda â†’ Resized images**)  
âœ… Sending notifications (**SNS â†’ Lambda â†’ Email via SES**)  
âœ… Logging & monitoring (**CloudWatch â†’ Lambda â†’ Log processing**)

ğŸ› ï¸ **All AWS Services That Use Asynchronous Invocation:**

| **Service**                                  | **Description**                                                     |
| -------------------------------------------- | ------------------------------------------------------------------- |
| **Amazon S3**                                | Triggers Lambda on object uploads, deletions, or modifications.     |
| **Amazon SNS (Simple Notification Service)** | Publishes messages to Lambda asynchronously.                        |
| **Amazon EventBridge (CloudWatch Events)**   | Invokes Lambda on scheduled or event-based triggers.                |
| **Amazon SES (Simple Email Service)**        | Calls Lambda for email receiving rules.                             |
| **AWS CodeCommit**                           | Triggers Lambda on repository events (pushes, merges).              |
| **AWS Config**                               | Calls Lambda when there are configuration changes in AWS resources. |
| **AWS CloudFormation**                       | Uses Lambda-backed custom resources for automation.                 |

âš ï¸ **Retries & Dead Letter Queues (DLQ):**

- If Lambda **fails**, AWS **automatically retries twice** before sending the event to a **DLQ (SQS or SNS)** for debugging.

---

## ğŸ‘€ **3. Poll-Based Invocation â€“ "The Watchful Guardian"**

ğŸ‘‰ **When AWS keeps watching for new data & triggers Lambda automatically!**

ğŸ’¡ **Example Scenario:**  
You have an **SQS queue** that stores incoming customer orders. Lambda **polls** the queue, picks up new orders, and processes them **automatically**.

### **ğŸ¤” How It Works:**

Poll-based invocation in AWS Lambda means **AWS itself handles polling** for event sources like **SQS**, **Kinesis**, and **DynamoDB Streams**. Instead of you setting a fixed interval, Lambda dynamically adjusts how often it polls based on load.

- **1ï¸âƒ£** **Lambda continuously polls** the event source (**SQS, Kinesis, DynamoDB Streams**).
- **2ï¸âƒ£** **If new events exist**, Lambda retrieves them **in batches**.
- **3ï¸âƒ£** **Lambda invokes your function** to process the batch.
- **4ï¸âƒ£** If there's **high traffic**, AWS **polls more frequently** and scales Lambda **automatically**.
- **5ï¸âƒ£** If no data is present, Lambda **polls less often to save costs**.

### ğŸ¯ **Use Cases:**

- âœ”ï¸ Processing event queues (**SQS â†’ Lambda â†’ Order fulfillment**)
- âœ”ï¸ Real-time analytics (**Kinesis â†’ Lambda â†’ Data transformation**)
- âœ”ï¸ Database change tracking (**DynamoDB Streams â†’ Lambda â†’ Audit logs**)

### â³ **Polling Interval â€“ "AWS Handles It Automatically"**

- There is **no fixed interval like "every 10 seconds"**.
- AWS dynamically adjusts polling **based on event volume**.
- When there are **more records/messages**, AWS **polls more frequently**.
- When thereâ€™s **less activity**, AWS **polls less often** to save resources.

---

### ğŸ“¦ **Batch Processing â€“ "More Efficient, Less Cost"**

- AWS Lambda **groups multiple records/messages** into **batches** before invoking the function.
- This reduces invocation overhead and **optimizes cost & performance**.
- **Batch size depends on the event source:**
  - **SQS**: Up to **10,000 messages** per batch.
  - **Kinesis/DynamoDB Streams**: Up to **10,000 records** or **6 MB of data** per batch.

---

### âš¡ **Parallel Processing â€“ "Lambda Scales for You"**

- **Multiple Lambda instances** can process events **in parallel**.
- For **SQS**, each batch is processed by a **separate Lambda instance**.
- For **Kinesis/DynamoDB**, parallelism is **controlled by shards**.
- If more events arrive, AWS **automatically scales Lambda to keep up**.

---

### ğŸ¤” **How Lambda Polls Each Event Source**

| **Service**             | **How Polling Works**                                                         |
| ----------------------- | ----------------------------------------------------------------------------- |
| **Amazon SQS** ğŸ“¨       | Lambda polls the queue continuously and retrieves messages **in batches**.    |
| **Amazon Kinesis** ğŸ“Š   | Lambda polls **each shard** for new data and processes it.                    |
| **DynamoDB Streams** ğŸ›¢ï¸ | Lambda polls **the stream** for database changes (inserts, updates, deletes). |

### ğŸ› ï¸ **All AWS Services That Use Poll-Based Invocation:**

| **Service**                                  | **Description**                                                |
| -------------------------------------------- | -------------------------------------------------------------- |
| **Amazon SQS (Simple Queue Service)**        | Lambda automatically polls and processes messages in a queue.  |
| **Amazon Kinesis**                           | Lambda processes real-time streaming data in shards.           |
| **Amazon DynamoDB Streams**                  | Lambda reacts to database changes (inserts, updates, deletes). |
| **Amazon MSK (Managed Streaming for Kafka)** | Lambda polls Kafka topics for new messages.                    |
| **Amazon MQ (ActiveMQ & RabbitMQ)**          | Lambda listens to message brokers and processes messages.      |

âš ï¸ **Concurrency Management:**

- AWS **automatically scales** Lambda if thereâ€™s a high event rate.
- You can control batch sizes and retry logic with **event source mappings**.

---

## ğŸ¯ **Final Summary â€“ Which Invocation Type Should You Use?**

| **Invocation Type** | **Response Needed?** | **Best Use Cases**                                                             | **Example AWS Services**                                       |
| ------------------- | -------------------- | ------------------------------------------------------------------------------ | -------------------------------------------------------------- |
| ğŸ•’ Synchronous      | âœ… Yes               | APIs, Chatbots, Real-time Queries, Authentication, Edge Processing, Networking | API Gateway, ALB, Alexa, Lex, Cognito, CloudFront, VPC Lattice |
| ğŸ”„ Asynchronous     | âŒ No                | Background Jobs, Notifications, File Processing                                | S3, SNS, EventBridge, CodeCommit, SES, Config                  |
| ğŸ‘€ Poll-Based       | ğŸ“Š Depends           | Streaming Data, Queues, Change Tracking                                        | SQS, Kinesis, DynamoDB Streams, MSK, MQ                        |

---

**Final Thoughts â€“ Choose Wisely!**

ğŸ’¡ **Quick Rules of Thumb:**

- **Need an instant response?** â†’ **Use Synchronous Invocation**.
- **Processing jobs in the background?** â†’ **Use Asynchronous Invocation**.
- **Handling event streams or message queues?** â†’ **Use Poll-Based Invocation**.
