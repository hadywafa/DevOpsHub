# ğŸ”„ **Sharing EBS Snapshots**

Need to share your backups with a teammate, another AWS account, or across regions? âœ…  
**Amazon EBS Snapshot Sharing** lets you do just that â€” but like lending your favorite book, itâ€™s better when you _set the rules_. ğŸ“šğŸ”

Whether you're distributing unencrypted data publicly or sharing encrypted volumes securely, letâ€™s walk through how snapshot sharing works, whatâ€™s allowed, and what steps you need to take.

---

## ğŸŒ **Sharing Unencrypted Snapshots**

Unencrypted snapshots are like handing someone a USB stick â€” there's no encryption key needed, just basic access permissions.

### ğŸ”“ 1. **Public Sharing**

- Anyone in the AWS universe can copy the snapshot.
- Great for open-source projects, test datasets, or public AMIs.

> âš ï¸ Be careful â€” public means **anyone** can see it!

### ğŸ•µï¸ 2. **Private Sharing with Specific Accounts**

- Share only with **specific AWS Account IDs** (e.g., your team, customers).
- You manage access from the **Permissions tab** of your snapshot.

---

## ğŸ” **Sharing Encrypted Snapshots**

Encrypted snapshots are more like sealed safes: to open them, recipients must have access to the **encryption key** (KMS Key). And not just any key â€” it must be **your custom key**, not the AWS-managed one.

<div style="text-align:center;">
  <img src="images/share-encrypted-ebs-snapshot-with-another-account.png" alt="Encrypted Snapshot Sharing Diagram" style="border-radius: 10px;" />
</div>

---

### âœ… **Checklist Before You Share:**

| Requirement                  | Explanation                                             |
| ---------------------------- | ------------------------------------------------------- |
| ğŸ”‘ Custom KMS Key            | AWS-managed keys (default KMS keys) **canâ€™t** be shared |
| ğŸ‘¥ Recipient AWS Account ID  | Needed for snapshot access                              |
| âœ… KMS Key Access Permission | Must **allow the recipient account** to use your key    |

---

## ğŸ› ï¸ **Step-by-Step: Sharing an Encrypted Snapshot**

Hereâ€™s the secure sharing dance:

```mermaid
sequenceDiagram
    participant You as ğŸ“¤ Your AWS Account
    participant KMS as ğŸ” KMS Key
    participant Snap as ğŸ§Š Encrypted Snapshot
    participant Friend as ğŸ“¥ Recipient AWS Account

    You->>KMS: Add recipient account to key policy
    You->>Snap: Share snapshot with recipient ID
    Friend->>Snap: Copies shared snapshot
    Friend->>KMS: Re-encrypts snapshot using **their own KMS key**
    You-->>KMS: Revoke recipient access after copy
```

---

## ğŸ”‘ **Detailed Breakdown of the Steps**

### ğŸ”§ Step 1: Grant Access to the KMS Key

Go to your **KMS Console â†’ Keys â†’ Key Policy**, and add the recipient AWS account:

```json
{
  "Effect": "Allow",
  "Principal": { "AWS": "arn:aws:iam::123456789012:root" },
  "Action": ["kms:Decrypt", "kms:DescribeKey"],
  "Resource": "*"
}
```

> ğŸ” Without this, they wonâ€™t be able to copy or use the snapshot.

---

### ğŸ“¤ Step 2: Share the Snapshot

In the **EC2 Console** â†’ Snapshots â†’ select your snapshot â†’ **Modify Permissions** â†’ enter their AWS Account ID.

- Choose â€œ**Private**â€ and paste their Account ID.
- Done! ğŸ‰ They now see your snapshot in their console.

---

### ğŸ“‹ Step 3: Recipient Copies & Re-encrypts

Once shared:

- The recipient **copies** the snapshot into their account.
- During the copy process, they choose their **own KMS key** to encrypt it.

> ğŸ” Think of this like "make your own secure version" of my snapshot.

---

### ğŸšª Step 4: Revoke Access (Optional but Recommended)

Once theyâ€™ve got their copy:

- You can safely **remove** them from your KMS key policy.
- This ensures no one can snoop around later.

> ğŸ§¼ This step is your **security cleanup**!

---

## ğŸ§  **Things to Keep in Mind**

| ğŸ’¡ Consideration           | Why It Matters                                                                |
| -------------------------- | ----------------------------------------------------------------------------- |
| â›” Public Sharing Disabled | You **cannot** share encrypted snapshots publicly (only specific accounts).   |
| ğŸ” Manual Region Copy      | To move snapshots across regions, recipients must manually copy & re-encrypt. |
| â³ Donâ€™t Delay the Copy    | If you revoke KMS access **before** they copy, theyâ€™ll lose access entirely.  |
| ğŸ·ï¸ Tag Before Sharing      | Tags help recipients identify what the snapshot is for.                       |

---

## ğŸ¯ **Example Use Case: Multi-Account Backup Sharing**

Letâ€™s say you have:

- ğŸ” A database snapshot encrypted with `MySecureKMSKey`
- ğŸ‘¥ A partner team in a different AWS account (Account B)
- ğŸ¯ You want to securely share that snapshot with them

**Your Tasks:**

1. Allow Account B to use `MySecureKMSKey`
2. Share the snapshot privately with Account B
3. Tell them to copy + re-encrypt
4. Remove their access once the copy is complete

---

## ğŸ **Conclusion: Share Wisely, Encrypt Securely**

EBS snapshot sharing is a powerful feature for collaboration, migration, and backup. But with great power comes great encryption responsibility. ğŸ”

- Unencrypted? Easy to share.
- Encrypted? **Follow the proper access + copy steps**.
- Always revoke access after the jobâ€™s done for **tight security control**.
