# üìä Prometheus Metric Naming Conventions ‚Äî Best Practices

## üß© 1. **Follow the Structure: `<system>_<subsystem>_<metric>_<unit>`**

This is the most widely accepted pattern.

### ‚úÖ Example

```promql
http_server_requests_duration_seconds
```

**Breakdown:**

- `http` ‚Üí System (the general domain)
- `server_requests` ‚Üí Subsystem (narrower focus)
- `duration` ‚Üí What‚Äôs being measured
- `seconds` ‚Üí Unit of measurement

**Why:**
This makes metrics intuitive and easy to query (`http_server_requests_duration_seconds_sum` clearly tells you what it measures).

---

## üß≠ 2. **Use Base Units**

Always express metrics using **base SI units**, to avoid confusion and conversions in queries.

| Measurement Type | Recommended Unit      | Example Metric               |
| ---------------- | --------------------- | ---------------------------- |
| Time             | seconds               | `process_cpu_seconds_total`  |
| Bytes            | bytes                 | `node_memory_usage_bytes`    |
| Temperature      | celsius               | `sensor_temperature_celsius` |
| Counts           | none (no unit suffix) | `http_requests_total`        |

### ‚ùå Avoid:

```promql
http_request_duration_ms  # bad: uses ms
```

### ‚úÖ Instead:

```promql
http_request_duration_seconds
```

---

## üè∑Ô∏è 3. **Use `_total` for Counters**

Prometheus **Counter** metrics **must end with `_total`** to signify that they are **monotonically increasing**.

### ‚úÖ Example

```promql
http_requests_total
```

**Why:**
Prometheus automatically generates helper time series like `_rate()` and `_increase()`, which are semantically correct only for totals.

---

## ‚è±Ô∏è 4. **Histograms and Summaries Use `_bucket`, `_sum`, and `_count`**

When you use **Histograms** or **Summaries**, Prometheus generates these suffixes automatically ‚Äî do **not** change or remove them.

### Example (Histogram)

```promql
http_request_duration_seconds_bucket
http_request_duration_seconds_sum
http_request_duration_seconds_count
```

**Why:**
These suffixes enable Prometheus to compute percentiles and averages consistently across systems.

---

## üßÆ 5. **Plural vs Singular Names**

Use **plural names** for counts of things, and **singular names** for gauges or measurements.

| Metric Type | Example               | Reason                                |
| ----------- | --------------------- | ------------------------------------- |
| Counter     | `http_requests_total` | Many requests counted                 |
| Gauge       | `disk_usage_bytes`    | Represents one continuous measurement |

---

## üß† 6. **Avoid Units in Labels**

**Never** encode units in labels ‚Äî use the metric name instead.

### ‚ùå Bad:

```promql
memory_usage{unit="MB"}
```

### ‚úÖ Good:

```promql
memory_usage_bytes
```

**Why:**
Labels should describe **dimensions**, not units.

---

## üß± 7. **Use Consistent Label Keys**

Label keys should be **snake_case** and **consistent** across all metrics.

| Bad                              | Good                     |
| -------------------------------- | ------------------------ |
| `method`, `Method`, `httpMethod` | `method`                 |
| `endpoint` vs `path`             | pick one and stick to it |

### Example

```promql
http_requests_total{method="GET", status="200"}
```

---

## üß∞ 8. **Avoid Ambiguous or Redundant Words**

Keep names short but meaningful ‚Äî skip redundant context that‚Äôs already in the job or label.

### ‚ùå Bad:

```promql
prometheus_node_memory_usage_bytes
```

### ‚úÖ Good:

```promql
node_memory_usage_bytes
```

(The job name ‚Äúprometheus‚Äù already gives context.)

---

## üßç 9. **Avoid Reserved or Generic Words**

Avoid common words like `value`, `size`, `number`, unless truly necessary.

### ‚ùå Bad:

```promql
cpu_value
```

### ‚úÖ Good:

```promql
cpu_usage_seconds_total
```

---

## ‚öôÔ∏è 10. **Use Lowercase and Snake Case**

Always use **lowercase letters** and **underscores** to separate words.

### ‚úÖ Example

```promql
kafka_consumer_lag_seconds
```

### ‚ùå Bad

```promql
KafkaConsumerLag
Kafka.Consumer.Lag
```

---

## üìö 11. **Prefix Metrics with Project/System**

If you develop custom exporters, prefix all metrics with your project or team name.

### Example

```promql
acme_order_service_request_duration_seconds
acme_order_service_requests_total
```

**Why:**
Avoids naming collisions when multiple teams export metrics to the same Prometheus instance.

---

## üí° 12. **Boolean Metrics Should End with `_enabled` or `_up`**

Use 0 or 1 values for booleans.

### Example

```promql
service_feature_x_enabled{service="billing"}  # 1 = enabled, 0 = disabled
api_server_up  # 1 = healthy, 0 = down
```

---

## üß© 13. **Group Related Metrics by Prefix**

All related metrics should share the same prefix for discoverability.

### Example

```ini
node_cpu_seconds_total
node_memory_usage_bytes
node_network_receive_bytes_total
node_network_transmit_bytes_total
```

**Why:**
Easier to explore via `node_` prefix in Prometheus UI.

---

## üîç 14. **Document Your Metrics**

Even with perfect naming, documentation matters.

Use a README or a `metrics.md` file to explain:

- What each metric measures
- The unit
- Possible labels
- Whether it‚Äôs a counter/gauge/histogram/summary

---

## üßæ Example ‚Äî Clean Custom Metric Set

Here‚Äôs how a well-designed metric family looks:

```promql
# HELP order_service_requests_total Total number of HTTP requests processed.
# TYPE order_service_requests_total counter
order_service_requests_total{method="GET", status="200"}  53423
order_service_requests_total{method="POST", status="500"}  21

# HELP order_service_request_duration_seconds Request duration in seconds.
# TYPE order_service_request_duration_seconds histogram
order_service_request_duration_seconds_bucket{le="0.1"}  142
order_service_request_duration_seconds_bucket{le="0.5"}  1203
order_service_request_duration_seconds_sum  245.7
order_service_request_duration_seconds_count  1345
```

---

## ‚úÖ Quick Summary

| Rule           | Best Practice                          | Example                                 |
| -------------- | -------------------------------------- | --------------------------------------- |
| Naming pattern | `<system>_<subsystem>_<metric>_<unit>` | `http_server_requests_duration_seconds` |
| Base units     | Use seconds, bytes, etc.               | `duration_seconds`                      |
| Counters       | End with `_total`                      | `http_requests_total`                   |
| Histograms     | Include `_bucket`, `_sum`, `_count`    | auto-generated                          |
| Labels         | Use snake_case, not units              | `method="GET"`                          |
| Booleans       | End with `_enabled` or `_up`           | `service_up`                            |
| Pluralization  | Count ‚Üí plural, Gauge ‚Üí singular       | `requests_total`, `usage_bytes`         |
| Case           | Lowercase snake_case only              | ‚úÖ                                      |
