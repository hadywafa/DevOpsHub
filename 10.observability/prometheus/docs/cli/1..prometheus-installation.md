# 🧑🏻‍💻 **Prometheus Installation**

Prometheus is a **powerful, open-source monitoring and alerting toolkit** built for reliability and scalability.
Let’s explore **all major ways to install Prometheus**, from quick local binaries to production-ready deployments.

---

## 📦 **1. Installing Prometheus Direct Binary**

This is the most **straightforward** method—ideal for testing, demos, or lab setups.

### 🔹 Step 1: Download Prometheus

Go to the [official Prometheus download page](https://prometheus.io/download/) and copy the link for your OS.
Then use either:

```bash
# Option 1 – via wget
wget https://github.com/prometheus/prometheus/releases/download/v2.53.0/prometheus-2.53.0.linux-amd64.tar.gz

# Option 2 – via browser
# Just download manually from the releases page
```

---

### 🔹 Step 2: Verify the Download

Confirm that the tarball is present:

```bash
ls -l
```

Output example:

```ini
-rw-r--r-- 1 user user 83782323 Jul 14 11:38 prometheus-2.53.0.linux-amd64.tar.gz
```

---

### 🔹 Step 3: Extract the Tarball

```bash
tar xvf prometheus-2.53.0.linux-amd64.tar.gz
cd prometheus-2.53.0.linux-amd64
```

---

### 🔹 Step 4: Explore Directory Contents

```bash
ls -l
```

You should see:

```ini
prometheus
promtool
prometheus.yml
consoles/
console_libraries/
```

**Key Files:**

- `prometheus` → Main server binary
- `promtool` → CLI validation tool
- `prometheus.yml` → Default config file
- `consoles` → Predefined web UI templates

---

### 🔹 Step 5: Start Prometheus

Run directly:

```bash
./prometheus
```

If everything works, you’ll see:

```ini
level=info msg="Server is ready to receive web requests."
```

---

### 🔹 Step 6: Access the Web UI

Open [http://localhost:9090](http://localhost:9090)

Prometheus is self-scraping by default — to confirm:

```promql
up{job="prometheus"}
```

A value of `1` = healthy target.

---

✅ **At this point, you’ve successfully installed Prometheus manually!**  
It’s ideal for testing, but not production-safe (no persistence, no service manager).

---

## ⚙️ **2. Installing Prometheus as a Systemd Service (Production Bare-Metal Setup)**

This approach is more secure and production-appropriate for **Linux VMs or servers**.

---

### 🔹 Step 1: Create a Dedicated User

```bash
sudo useradd --no-create-home --shell /bin/false prometheus
```

This isolates Prometheus processes from other system users.

---

### 🔹 Step 2: Create Directories

```bash
sudo mkdir /etc/prometheus /var/lib/prometheus
sudo chown prometheus:prometheus /etc/prometheus /var/lib/prometheus
```

---

### 🔹 Step 3: Copy Prometheus Binaries

After extracting your tarball:

```bash
sudo cp prometheus promtool /usr/local/bin/
sudo chown prometheus:prometheus /usr/local/bin/prometheus /usr/local/bin/promtool
```

---

### 🔹 Step 4: Copy Console Assets & Config

```bash
sudo cp -r consoles console_libraries /etc/prometheus/
sudo cp prometheus.yml /etc/prometheus/
sudo chown -R prometheus:prometheus /etc/prometheus
```

---

### 🔹 Step 5: Create a Systemd Service Unit

Create `/etc/systemd/system/prometheus.service`:

```ini
[Unit]
Description=Prometheus Monitoring
Wants=network-online.target
After=network-online.target

[Service]
User=prometheus
Group=prometheus
Type=simple
ExecStart=/usr/local/bin/prometheus \
  --config.file=/etc/prometheus/prometheus.yml \
  --storage.tsdb.path=/var/lib/prometheus/ \
  --web.console.templates=/etc/prometheus/consoles \
  --web.console.libraries=/etc/prometheus/console_libraries

[Install]
WantedBy=multi-user.target
```

---

### 🔹 Step 6: Reload Systemd & Start Service

```bash
sudo systemctl daemon-reload
sudo systemctl start prometheus
sudo systemctl status prometheus
```

Expected:

```ini
Active: active (running)
```

---

### 🔹 Step 7: Enable Auto-start on Boot

```bash
sudo systemctl enable prometheus
```

---

### 🔹 Step 8: Verify the Web UI

Access [http://localhost:9090](http://localhost:9090)
Prometheus will start automatically after every reboot.

✅ **This setup is suitable for production systems running on VMs or bare metal.**

---

## 🐳 **3. Installing Prometheus in Docker**

This is the most **containerized and portable** way to run Prometheus.

---

### 🔹 Step 1: Prepare Configuration

Create a `prometheus.yml` file:

```yaml
global:
  scrape_interval: 15s

scrape_configs:
  - job_name: "prometheus"
    static_configs:
      - targets: ["localhost:9090"]
```

---

### 🔹 Step 2: Run Prometheus Container

```bash
docker run -d \
  --name prometheus \
  -p 9090:9090 \
  -v $(pwd)/prometheus.yml:/etc/prometheus/prometheus.yml \
  prom/prometheus
```

Explanation:

- `-d` → Run detached
- `-v` → Mount config from host
- `-p` → Expose port 9090
- `prom/prometheus` → Official image

---

### 🔹 Step 3: Verify

Check logs:

```bash
docker logs prometheus
```

You should see:

```ini
Server is ready to receive web requests.
```

Open [http://localhost:9090](http://localhost:9090)

✅ **Containerized Prometheus is perfect for DevOps, CI/CD demos, or quick local environments.**

---

## ⚡ **4. Installing Prometheus with Docker Compose**

This is an **advanced container setup** ideal for teams using Docker Compose stacks.

---

### 🔹 Step 1: Create Directory Structure

```ini
prometheus/
 ├── prometheus.yml
 └── docker-compose.yml
```

---

### 🔹 Step 2: prometheus.yml

```yaml
global:
  scrape_interval: 15s
  evaluation_interval: 15s

scrape_configs:
  - job_name: "prometheus"
    static_configs:
      - targets: ["localhost:9090"]
```

---

### 🔹 Step 3: docker-compose.yml

```yaml
version: "3.8"

services:
  prometheus:
    image: prom/prometheus:v2.53.0
    container_name: prometheus
    volumes:
      - ./prometheus.yml:/etc/prometheus/prometheus.yml
      - prometheus_data:/prometheus
    ports:
      - "9090:9090"
    restart: unless-stopped

volumes:
  prometheus_data:
```

---

### 🔹 Step 4: Launch Stack

```bash
docker-compose up -d
```

---

### 🔹 Step 5: Verify Persistent Volume

Even after removing/restarting the container, Prometheus data persists:

```bash
docker volume ls
```

---

### 🔹 Step 6: Access UI

Visit [http://localhost:9090](http://localhost:9090)

✅ **This is the ideal setup for local or small production clusters** — persistent, portable, and self-contained.

---

## 🧰 **Quick Comparison Summary**

<div align="center" style="background-color: #141a19ff;color: #a8a5a5ff; border-radius: 10px; border: 2px solid">

| Installation Type | Environment     | Persistence   | Automation             | Recommended Use         |
| ----------------- | --------------- | ------------- | ---------------------- | ----------------------- |
| Manual Binary     | Localhost / Lab | No            | Manual                 | Learning / Testing      |
| Systemd           | VM / Server     | Yes           | Yes (boot)             | Production (bare metal) |
| Docker            | Containerized   | No            | Container restart only | Lightweight demos       |
| Docker Compose    | Containerized   | Yes (volumes) | Yes                    | Best Dev / CI setup     |

</div>

---

## 🌟 **Bonus: Access Prometheus Remotely**

If Prometheus runs on a VM and you want remote browser access:

```bash
sudo ufw allow 9090/tcp
```

Then open:

```ini
http://<your-server-ip>:9090
```

---

## 🔐 **Security and Hardening Tips**

- Always use **a dedicated user** (`prometheus`) for system installs.
- Bind to **private interfaces only** using `--web.listen-address=0.0.0.0:9090`.
- Use **reverse proxies (NGINX / Traefik)** for authentication and HTTPS.
- Regularly rotate and compress `/var/lib/prometheus` data to prevent disk overflow.
