# ğŸ§© Terraform Variable Types & Their Full Argument Reference

Terraform supports three core types of variables:

- ğŸŸ¢ **Input Variables** â€“ for passing values into configs/modules
- ğŸ”µ **Output Variables** â€“ for exposing values to CLI/users or other modules
- ğŸŸ£ **Local Variables** â€“ for internal reuse and calculations

---

## ğŸ”¹ 1. Input Variables (`variable` block)

Input variables allow you to **parametrize** your Terraform configuration.

### âœ… Basic Syntax

```hcl
variable "region" {
  type        = string
  default     = "us-east-1"
  description = "AWS region to deploy resources"
}
```

---

### ğŸ› ï¸ All Supported Arguments for `variable` Block

| Argument      | Type                                                      | Required                        | Description                                             |
| ------------- | --------------------------------------------------------- | ------------------------------- | ------------------------------------------------------- |
| `type`        | `string`, `number`, `bool`, `list`, `map`, `object`, etc. | âŒ _(Optional but recommended)_ | Defines the expected type                               |
| `default`     | Any type                                                  | âŒ                              | Default value if not provided in `.tfvars` or CLI       |
| `description` | `string`                                                  | âŒ                              | Description shown in `terraform plan` and documentation |
| `sensitive`   | `bool`                                                    | âŒ                              | Hides value from CLI output/logs (e.g., passwords)      |
| `nullable`    | `bool`                                                    | âŒ _(Terraform â‰¥ 0.13)_         | If `false`, the value cannot be `null`                  |
| `validation`  | block                                                     | âŒ _(Terraform â‰¥ 0.13)_         | Add custom validation rules and error messages          |

---

### ğŸ”’ Example: Sensitive Input Variable

```hcl
variable "db_password" {
  type        = string
  sensitive   = true
  description = "Password for DB connection"
}
```

> ğŸš« This will suppress it in CLI outputs and state diffs.

---

### âš–ï¸ Example: Validating Values

```hcl
variable "env" {
  type = string
  validation {
    condition     = contains(["dev", "prod", "stage"], var.env)
    error_message = "Environment must be dev, stage, or prod."
  }
}
```

---

## ğŸ”¹ 2. Output Variables (`output` block)

These expose data **after running `terraform apply`**, useful for:

- Displaying useful info to the user (like IPs)
- Passing values between modules
- Extracting values in automation

---

### âœ… Basic Syntax

```hcl
output "instance_ip" {
  value       = aws_instance.web.public_ip
  description = "Public IP of web server"
}
```

---

### ğŸ› ï¸ All Supported Arguments for `output` Block

| Argument      | Type     | Required | Description                        |
| ------------- | -------- | -------- | ---------------------------------- |
| `value`       | Any      | âœ…       | The actual value to return         |
| `description` | `string` | âŒ       | Shown in documentation/CLI output  |
| `sensitive`   | `bool`   | âŒ       | Hide output value in CLI and logs  |
| `depends_on`  | `list`   | âŒ       | Explicit dependency list if needed |

---

### ğŸ”’ Example: Sensitive Output

```hcl
output "admin_password" {
  value     = var.db_password
  sensitive = true
}
```

> ğŸ‘ï¸â€ğŸ—¨ï¸ This will NOT show up in CLI output unless you override it.

---

### ğŸ”— Example: Use `depends_on` to control output timing

```hcl
output "bucket_url" {
  value       = aws_s3_bucket.mybucket.website_endpoint
  depends_on  = [aws_s3_bucket.mybucket]
}
```

> âš™ï¸ Useful if your output relies on a delayed resource.

---

## ğŸ”¹ 3. Local Variables (`locals` block)

These are **internal-only variables** useful for computation, string formatting, or reuse.

---

### âœ… Basic Syntax

```hcl
locals {
  full_tag = "${var.env}-${var.project}"
}
```

Use it:

```hcl
resource "aws_s3_bucket" "example" {
  bucket = local.full_tag
}
```

---

### ğŸ”„ Dynamic Locals Example

```hcl
locals {
  is_prod     = var.environment == "prod"
  instance_type = local.is_prod ? "t3.large" : "t3.micro"
}
```

---

### ğŸ› ï¸ Local Variable Tips

| Tip                                  | Benefit                       |
| ------------------------------------ | ----------------------------- |
| Use for repeated patterns            | Avoid duplication             |
| Useful for intermediate values       | Great for cleaner expressions |
| Doesnâ€™t affect state or input/output | Fully local scope only        |

---

## ğŸ“ Summary Table

| Variable Type | Purpose        | Can Be Input? | Used For Output? | Stored in State? | Can Be Sensitive? |
| ------------- | -------------- | ------------- | ---------------- | ---------------- | ----------------- |
| `variable`    | External input | âœ…            | âŒ               | âœ…               | âœ…                |
| `output`      | Show result    | âŒ            | âœ…               | âœ…               | âœ…                |
| `locals`      | Internal logic | âŒ            | âŒ               | âŒ               | âŒ                |

---

## ğŸ“ Best Practices

âœ… Use `description` in all variable blocks
âœ… Use `sensitive = true` for secrets
âœ… Validate user input with `validation` block
âœ… Use `locals` to avoid code repetition
âœ… Only expose outputs you actually need (especially in modules)
