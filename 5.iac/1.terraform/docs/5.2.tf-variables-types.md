# 🧩 Terraform Variable Types & Their Full Argument Reference

Terraform supports three core types of variables:

- 🟢 **Input Variables** – for passing values into configs/modules
- 🔵 **Output Variables** – for exposing values to CLI/users or other modules
- 🟣 **Local Variables** – for internal reuse and calculations

---

## 🔹 1. Input Variables (`variable` block)

Input variables allow you to **parametrize** your Terraform configuration.

### ✅ Basic Syntax

```hcl
variable "region" {
  type        = string
  default     = "us-east-1"
  description = "AWS region to deploy resources"
}
```

---

### 🛠️ All Supported Arguments for `variable` Block

| Argument      | Type                                                      | Required                        | Description                                             |
| ------------- | --------------------------------------------------------- | ------------------------------- | ------------------------------------------------------- |
| `type`        | `string`, `number`, `bool`, `list`, `map`, `object`, etc. | ❌ _(Optional but recommended)_ | Defines the expected type                               |
| `default`     | Any type                                                  | ❌                              | Default value if not provided in `.tfvars` or CLI       |
| `description` | `string`                                                  | ❌                              | Description shown in `terraform plan` and documentation |
| `sensitive`   | `bool`                                                    | ❌                              | Hides value from CLI output/logs (e.g., passwords)      |
| `nullable`    | `bool`                                                    | ❌ _(Terraform ≥ 0.13)_         | If `false`, the value cannot be `null`                  |
| `validation`  | block                                                     | ❌ _(Terraform ≥ 0.13)_         | Add custom validation rules and error messages          |

---

### 🔒 Example: Sensitive Input Variable

```hcl
variable "db_password" {
  type        = string
  sensitive   = true
  description = "Password for DB connection"
}
```

> 🚫 This will suppress it in CLI outputs and state diffs.

---

### ⚖️ Example: Validating Values

```hcl
variable "env" {
  type = string
  validation {
    condition     = contains(["dev", "prod", "stage"], var.env)
    error_message = "Environment must be dev, stage, or prod."
  }
}
```

---

## 🔹 2. Output Variables (`output` block)

These expose data **after running `terraform apply`**, useful for:

- Displaying useful info to the user (like IPs)
- Passing values between modules
- Extracting values in automation

---

### ✅ Basic Syntax

```hcl
output "instance_ip" {
  value       = aws_instance.web.public_ip
  description = "Public IP of web server"
}
```

---

### 🛠️ All Supported Arguments for `output` Block

| Argument      | Type     | Required | Description                        |
| ------------- | -------- | -------- | ---------------------------------- |
| `value`       | Any      | ✅       | The actual value to return         |
| `description` | `string` | ❌       | Shown in documentation/CLI output  |
| `sensitive`   | `bool`   | ❌       | Hide output value in CLI and logs  |
| `depends_on`  | `list`   | ❌       | Explicit dependency list if needed |

---

### 🔒 Example: Sensitive Output

```hcl
output "admin_password" {
  value     = var.db_password
  sensitive = true
}
```

> 👁️‍🗨️ This will NOT show up in CLI output unless you override it.

---

### 🔗 Example: Use `depends_on` to control output timing

```hcl
output "bucket_url" {
  value       = aws_s3_bucket.mybucket.website_endpoint
  depends_on  = [aws_s3_bucket.mybucket]
}
```

> ⚙️ Useful if your output relies on a delayed resource.

---

## 🔹 3. Local Variables (`locals` block)

These are **internal-only variables** useful for computation, string formatting, or reuse.

---

### ✅ Basic Syntax

```hcl
locals {
  full_tag = "${var.env}-${var.project}"
}
```

Use it:

```hcl
resource "aws_s3_bucket" "example" {
  bucket = local.full_tag
}
```

---

### 🔄 Dynamic Locals Example

```hcl
locals {
  is_prod     = var.environment == "prod"
  instance_type = local.is_prod ? "t3.large" : "t3.micro"
}
```

---

### 🛠️ Local Variable Tips

| Tip                                  | Benefit                       |
| ------------------------------------ | ----------------------------- |
| Use for repeated patterns            | Avoid duplication             |
| Useful for intermediate values       | Great for cleaner expressions |
| Doesn’t affect state or input/output | Fully local scope only        |

---

## 🎓 Summary Table

| Variable Type | Purpose        | Can Be Input? | Used For Output? | Stored in State? | Can Be Sensitive? |
| ------------- | -------------- | ------------- | ---------------- | ---------------- | ----------------- |
| `variable`    | External input | ✅            | ❌               | ✅               | ✅                |
| `output`      | Show result    | ❌            | ✅               | ✅               | ✅                |
| `locals`      | Internal logic | ❌            | ❌               | ❌               | ❌                |

---

## 📁 Best Practices

✅ Use `description` in all variable blocks
✅ Use `sensitive = true` for secrets
✅ Validate user input with `validation` block
✅ Use `locals` to avoid code repetition
✅ Only expose outputs you actually need (especially in modules)
