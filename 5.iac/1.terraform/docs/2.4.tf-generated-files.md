# ğŸ“ Terraform Generated Files and Folders

> âœ… **Terraform Version:** v1.12.2  
> ğŸ§  Covers `init`, `apply`, `destroy`, and best practices for `.gitignore`

---

## âš™ï¸ 1. `terraform init` â€” Initialization Phase

When you run:

```bash
terraform init
```

### ğŸ“¦ Files/Folders Created:

#### âœ… `.terraform/` (Directory)

- Stores the **Terraform provider binaries** and **plugin cache**
- Might also include:

  - `providers/` â€“ downloaded provider plugins
  - `terraform-plugin-sdk/` (optional)
  - `modules/` â€“ if you use modules
  - `lock.hcl` â€“ provider version tracking

#### âœ… `.terraform.lock.hcl` (File)

- Locks **exact provider versions**
- Guarantees consistent behavior across team machines
- âœ… Safe to commit to version control

---

## ğŸš€ 2. `terraform apply` â€” Execution Phase

When you run:

```bash
terraform apply
```

Terraform evaluates the `.tf` files and creates or updates resources.

### ğŸ“˜ Files Generated:

#### âœ… `terraform.tfstate`

- Tracks the **real infrastructure state**
- Maps resource IDs, attributes, dependencies
- âš ï¸ Critical! If lost or modified, Terraform loses sync with real infra
- Contains **sensitive values** like passwords, keys, etc.
- ğŸ”’ Donâ€™t commit to Git!

#### âœ… `terraform.tfstate.lock.info` (Temporary)

- Auto-generated **lock file during apply/destroy**
- Prevents **concurrent runs** of `terraform apply`/`destroy`
- ğŸ”„ Automatically removed after execution completes
- âš ï¸ If Terraform crashes, the lock file might remain and block further commands â€” use:

  ```bash
  terraform force-unlock <lock-id>
  ```

#### âœ… `terraform.tfstate.backup`

- Created **after a successful apply/destroy**
- Contains the **previous state**
- Helps you **recover** from bad state changes
- âœ… Keep it, but don't commit it to Git

---

## ğŸ’£ 3. `terraform destroy` â€” Destruction Phase

```bash
terraform destroy
```

Deletes all resources in the `terraform.tfstate`.

### ğŸ“ File Behavior:

- Still uses the same `.terraform`, `.lock.hcl`, `.tfstate`
- After success:

  - Creates a **new `terraform.tfstate.backup`** (the one before destroy)
  - Updates `terraform.tfstate` to be **empty** or with `null` resources
  - Deletes the lock file

---

## ğŸ§¾ Summary Table

| File/Folder                   | Created by      | Description                                 | Include in Git? |
| ----------------------------- | --------------- | ------------------------------------------- | --------------- |
| `.terraform/`                 | `init`          | Provider binaries, module cache             | âŒ **No**       |
| `.terraform.lock.hcl`         | `init`          | Locks provider versions for consistency     | âœ… **Yes**      |
| `terraform.tfstate`           | `apply/destroy` | Current snapshot of deployed infrastructure | âŒ **No** ğŸ”’    |
| `terraform.tfstate.backup`    | `apply/destroy` | Previous state (used for rollback)          | âŒ **No**       |
| `terraform.tfstate.lock.info` | `apply/destroy` | Temporary lock to prevent parallel runs     | âŒ **No**       |

---

## ğŸ§  Best Practices

### âœ… What to **Include** in Git:

- Your `.tf` configuration files
- `.terraform.lock.hcl` (for consistent provider versions)

### âŒ What to **Exclude** (in `.gitignore`):

Create a `.gitignore` file like this:

```gitignore
# Terraform state
*.tfstate
*.tfstate.backup
.terraform/
terraform.tfstate.lock.info

# Local-only override files
*.auto.tfvars
*.tfvars
```

---

## ğŸ” Why Not Include State in Git?

- Contains **sensitive info** like:

  - Access keys
  - DB passwords
  - IPs

- Easy to accidentally expose secrets
- State should be **remotely stored**, not in Git

> âœ… Use **remote backends** (like AWS S3 + DynamoDB) to store state securely and support team collaboration.
