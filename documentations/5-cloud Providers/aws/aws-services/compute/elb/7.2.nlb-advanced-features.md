# **üîû NLB Advanced Features: PrivateLink and VPC Endpoint Services üîí**

In AWS, **PrivateLink** allows secure, private connectivity between VPCs without needing to use public IP addresses. One of the most powerful features of **NLB (Network Load Balancer)** is its integration with PrivateLink, enabling private and secure access to services hosted in different VPCs. Let‚Äôs break down how **PrivateLink** and **VPC Endpoint Services** work with **NLB** in a simple, easy-to-understand way.

## **What is PrivateLink? üîë**

**PrivateLink** is a service that enables you to access services hosted in other VPCs securely over private IP addresses, avoiding public exposure to the internet. This is helpful when you want to connect to a service in another VPC, like an API or database, without risking security by using public IPs.

- **Private Connectivity**: All traffic between VPCs stays within AWS's internal network.
- **No Public IPs**: There's no need to expose any services to the public internet.
- **Use Cases**: Connecting to third-party services or your own services hosted in another VPC, such as databases, APIs, or microservices.

## **How does PrivateLink Work with NLB? ü§ù**

![NLB PrivateLink](images/nlb-private-link.png)

To enable PrivateLink, we need two main components:

1. **Provider VPC**: The VPC that owns the service you want to share (e.g., a database or application hosted on EC2 instances).
2. **Consumer VPC**: The VPC that wants to connect to the service (e.g., your application in another VPC).

Here‚Äôs the simple flow:

1. **Network Load Balancer (NLB)**: The provider VPC must have an **NLB** to expose its services privately. This NLB listens for traffic and forwards it to the EC2 instances running the service.
2. **Interface VPC Endpoint**: The consumer VPC creates an **interface VPC endpoint** that connects to the NLB in the provider VPC.
3. **Private Connectivity**: When the consumer wants to access the service, it does so through this interface endpoint, using private IPs.

## **Key Features of PrivateLink and NLB** üöÄ

1. **No Public Exposure**: Services do not need public IPs. Traffic is routed securely over AWS‚Äôs internal network, making it much safer.
2. **Cross-AZ Support**: To ensure high availability, you can configure both the **NLB** and **interface endpoints** across multiple Availability Zones (AZs). This ensures that the connection remains available even if one AZ fails.
3. **DNS Resolution**: Consumers connect to the service using a DNS name (e.g., `my-service.vpce.amazonaws.com`). This resolves to private IPs, so the connection remains within AWS‚Äôs private network.
4. **Easy Access**: Consumers can connect via Private DNS names, which simplifies the connection process.

### **Example:**

- **Service Provider**: A company hosts its API service in **VPC A**, using an **NLB** to expose the service securely.
- **Service Consumer**: Your application is in **VPC B** and wants to access the API in **VPC A** securely.
- You create a **VPC Endpoint** in **VPC B** that connects to the NLB in **VPC A**, using PrivateLink. Now, your application can securely access the API via a private connection.

## **Setting Up PrivateLink with NLB üõ†Ô∏è**

### 1. **Create the NLB in the Provider VPC**

- Set up the **NLB** in the **Provider VPC** and configure it to forward traffic to the backend EC2 instances.
- Enable **cross-zone load balancing** on the NLB to ensure that traffic can be routed to all healthy instances across multiple AZs.

### 2. **Create the VPC Endpoint in the Consumer VPC**

- The **Consumer VPC** needs to create a **VPC interface endpoint** that connects to the NLB in the Provider VPC.
- Use the service name provided by the provider to create the endpoint.

### 3. **DNS Resolution**

- AWS automatically resolves the **Private DNS** name to the NLB‚Äôs private IP in the consumer VPC, enabling seamless private communication.

## **Pricing üìä**

PrivateLink with NLB comes with the following pricing model:

- **Per VPC Endpoint**: \$0.01 per hour for each interface endpoint in an Availability Zone.
- **Data Processed**: For the first **1TB** of data processed, the cost is \$0.01 per GB, with the price decreasing as the data volume increases.

## **Conclusion üéØ**

**PrivateLink** is an excellent solution for secure, private communication between VPCs, and **NLB** plays a crucial role in enabling this functionality. By using **PrivateLink**, you can keep your services secure and private without exposing them to the public internet, ensuring high availability and scalability with minimal management. Whether you're connecting to AWS services or third-party services, NLB with PrivateLink provides a reliable and secure connection.
