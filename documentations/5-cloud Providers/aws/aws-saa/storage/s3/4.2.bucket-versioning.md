# 📦 **Amazon S3 Bucket Versioning**

Bucket versioning is a powerful Amazon S3 feature that protects your data against accidental deletions and overwrites by maintaining multiple versions of every object stored in your bucket.

<div align="center" style="padding: 0 20px;">
  <img src="images/bucket-versioning.png" alt="S3 Bucket Versioning">
</div>

---

## 🔐 **What is S3 Bucket Versioning?**

**Bucket Versioning** is an Amazon S3 configuration that, when enabled, automatically preserves, retrieves, and restores every version of every object stored in your bucket. This ensures that your data is safeguarded against unintended actions, such as accidental deletions or overwrites.

### **Key Features:**

- **🌍 Universal Protection:** Applies to **all objects** in the bucket, both existing and newly uploaded.
- **🔄 Multiple Versions:** S3 saves every version of an object, allowing you to recover previous states.

---

## 🔄 **How Bucket Versioning Works**

Understanding the workflow of bucket versioning helps in effectively managing your data and ensuring its integrity.

### **1. Uploading Objects:**

- **📥 New Object:**

  - When you upload a new object to a versioned bucket, S3 assigns it a unique **version ID** and sets it as the **current version**.

- **🔄 Updating an Existing Object:**
  - Uploading an object with the same key as an existing one creates a new **current version**.
  - The previous object becomes a **non-current version** but remains stored in the bucket.

### **2. Deleting Objects:**

- **🗑️ Delete Operation:**

  - Deleting an object in a versioned bucket doesn’t remove it permanently. Instead, S3 adds a **DELETE marker** as the current version.
  - The actual object data remains as a **non-current version**.

- **⚠️ Effect of DELETE Marker:**
  - The DELETE marker makes the object appear as deleted when accessed without specifying a version ID.
  - Attempting to retrieve the object without specifying a version ID results in an error.

### **3. Recovering Deleted Objects:**

- **🔄 Removing the DELETE Marker:**
  - To retrieve or recover a deleted object, **delete the DELETE marker**.
  - The object reverts to its previous **current version**, making it accessible again.

### **4. Managing Versions with Lifecycle Policies:**

- **💰 Cost Control:**

  - Use **Lifecycle policies** to transition non-current versions to cheaper storage classes or to automatically expire them after a set period.

- **📜 Example Policies:**
  - **Transition Policy:** Move non-current versions to S3 Glacier after 30 days.
  - **Expiration Policy:** Permanently delete non-current versions after one year.

---

## 🛡️ **Bucket MFA Delete**

**MFA Delete** adds an additional layer of security to your S3 buckets by requiring multi-factor authentication (MFA) for sensitive operations.

### **Key Features:**

- **🔒 Enhanced Security:**

  - **Second Authentication:** Requires MFA authentication to **delete objects** or to **change the bucket’s versioning state**.

- **👑 Ownership and Configuration:**

  - **Bucket Owner Exclusive:** Only the bucket owner (**root account**) can enable or disable MFA Delete.
  - **Configuration Methods:** Can be enabled via the **AWS CLI**, **S3 REST API**, or **AWS SDKs**.

- **📁 Bucket-Level Setting:**
  - **Scope:** Applies uniformly to the entire bucket, ensuring consistent security policies across all objects.

---

## 🌟 **Benefits of S3 Bucket Versioning**

Implementing bucket versioning offers numerous advantages that enhance data protection and management.

### **1. Data Protection:**

- **🛡️ Accidental Deletions:**

  - Prevents permanent loss of data from unintended deletions by retaining previous versions of objects.

- **🔄 Overwrites:**
  - Safeguards against accidental overwrites by maintaining historical versions of objects.

### **2. Audit and Recovery:**

- **📊 Version Tracking:**

  - Enables tracking of changes and historical states of objects for auditing purposes.

- **🔧 Easy Recovery:**
  - Simplifies the process of restoring previous versions of objects without complex procedures.

### **3. Cost Management:**

- **💸 Lifecycle Policies:**
  - Helps manage storage costs by transitioning or expiring non-current versions based on defined rules.
