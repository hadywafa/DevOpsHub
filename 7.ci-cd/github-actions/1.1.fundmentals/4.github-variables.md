# GitHub Variables

## ðŸ”‘ GitHub Actions Context Variables

### 1. **`github.event_name` â†’ EVENT_NAME**

- **What it is**: The name of the event that triggered the workflow.
- **Examples**:
  - Push to a branch â†’ `push`
  - Open a pull request â†’ `pull_request`
  - Manual trigger â†’ `workflow_dispatch`
  - Scheduled run â†’ `schedule`

```yaml
EVENT_NAME="${{ github.event_name }}"
```

ðŸ‘‰ If you push to `main`, `EVENT_NAME` will be `push`.

---

### 2. **`github.ref_type` â†’ REF_TYPE**

- **What it is**: The type of Git reference that triggered the workflow.
- Possible values:
  - `branch`
  - `tag`
- **Default fallback**: In your snippet, you used `|| 'branch'` to default to `branch` if itâ€™s not set.

```yaml
REF_TYPE="${{ github.ref_type || 'branch' }}"
```

ðŸ‘‰ Examples:

- Push to `main` â†’ `branch`
- Push tag `v1.0.0` â†’ `tag`

---

### 3. **`github.ref_name` â†’ REF_NAME**

- **What it is**: The short name of the branch or tag that triggered the workflow.
- **Examples**:
  - Push to `refs/heads/main` â†’ `main`
  - Push to `refs/heads/dev` â†’ `dev`
  - Push to `refs/tags/v1.0.0` â†’ `v1.0.0`

```yaml
REF_NAME="${{ github.ref_name }}"
```

ðŸ‘‰ Much cleaner than `github.ref` (which would be `refs/heads/main`).

---

### 4. **`github.base_ref` â†’ BASE_REF**

- **What it is**: The base branch of a pull request (only set for PR events).
- **Examples**:
  - If you open a PR from `feature/login` into `main`:
    - `github.ref_name` â†’ `feature/login`
    - `github.base_ref` â†’ `main`
- For push events, `BASE_REF` is empty.

```yaml
BASE_REF="${{ github.base_ref }}"
```

ðŸ‘‰ Useful when you want to know the target branch of a PR.

---

## ðŸ“Š Example Scenarios

| Action                                | EVENT_NAME          | REF_TYPE | REF_NAME                      | BASE_REF  |
| ------------------------------------- | ------------------- | -------- | ----------------------------- | --------- |
| Push to `main`                        | `push`              | `branch` | `main`                        | _(empty)_ |
| Push tag `v1.0.0`                     | `push`              | `tag`    | `v1.0.0`                      | _(empty)_ |
| Open PR from `feature/login` â†’ `main` | `pull_request`      | `branch` | `feature/login`               | `main`    |
| Manual trigger                        | `workflow_dispatch` | `branch` | `main` (if triggered on main) | _(empty)_ |

---

## ðŸ§  Why These Matter

- **EVENT_NAME** â†’ lets you branch logic depending on trigger type.
- **REF_TYPE** â†’ distinguishes between branch builds vs release tag builds.
- **REF_NAME** â†’ gives you the clean branch/tag name for naming artifacts, Docker tags, Helm values, etc.
- **BASE_REF** â†’ critical for PR workflows (knowing the target branch).

---

ðŸ‘‰ For your CI/CD pipelines, the most common pattern is:

- Use `REF_TYPE` to decide if youâ€™re building a **branch preview** or a **release tag**.
- Use `REF_NAME` to tag images or Helm charts.
- Use `BASE_REF` to enforce rules (e.g., only allow PRs into `main`).

---

Would you like me to draft a **ready-to-use Bash snippet** that prints these variables in every run (like a debug step), so your team can immediately see what values they get for different triggers? Thatâ€™s a great onboarding trick.
