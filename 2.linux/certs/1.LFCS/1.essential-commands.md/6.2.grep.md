# ğŸ” **What is `grep`?**

`grep` = **Global Regular Expression Print**
It searches text in files and prints matching lines.

Works with:

- log files
- code
- system configs
- JSON/YAML
- pipeline outputs
- big directories
- stdin (piped data)

`grep` + `tail`, `awk`, `sed`, and `find` = DevOps power combo.

---

## ğŸ§© **Basic Syntax**

```bash
grep "pattern" file
```

Or recursive:

```bash
grep -r "pattern" directory/
```

Or from a pipe:

```bash
cat file | grep ERROR
```

---

## ğŸŸ¥ 1. BASIC SEARCHING

### ğŸ”¹ Search for exact text

```bash
grep "hello" file.txt
```

---

### ğŸ”¹ Case-insensitive search

```bash
grep -i "hello" file.txt
```

Matches:
`hello`, `Hello`, `HELLO`, `HeLlO`

---

### ğŸ”¹ Search multiple files

```bash
grep "ERROR" *.log
```

---

### ğŸ”¹ Show filenames only

```bash
grep -l "ERROR" *.log
```

Output:

```ini
app.log
server.log
```

---

## ğŸŸ§ 2. REGEX SEARCHING

### ğŸ”¹ Extended regex (`-E`)

```bash
grep -E "ERROR|WARNING" file.log
```

---

### ğŸ”¹ Match digits

```bash
grep -E "[0-9]+" file.txt
```

---

### ğŸ”¹ Match IP addresses

```bash
grep -E "([0-9]{1,3}\.){3}[0-9]{1,3}" access.log
```

---

### ğŸ”¹ Match lines starting with pattern

```bash
grep "^INFO" app.log
```

---

### ğŸ”¹ Match lines ending with pattern

```bash
grep "failed$" app.log
```

---

## ğŸŸ¨ 3. INVERSE MATCHING (NOT)

### ğŸ”¹ Exclude lines with pattern

```bash
grep -v "INFO" app.log
```

---

### ğŸ”¹ Exclude empty lines

```bash
grep -v "^$" file.txt
```

---

## ğŸŸ© 4. MATCH WHOLE WORDS

### ğŸ”¹ Match ONLY the full word

```bash
grep -w "error" file.txt
```

Matches:
`error`
Does NOT match:
`errors`, `terror`, `error123`

---

## ğŸŸ¦ 5. SHOW LINE NUMBERS

```bash
grep -n "ERROR" app.log
```

Output:

```ini
34: ERROR connection refused
120: ERROR timeout
```

---

## ğŸŸª 6. HIGHLIGHT MATCHES

Most systems support:

```bash
grep --color "pattern" file
```

---

## ğŸŸ« 7. RECURSIVE SEARCH

### ğŸ”¹ Search through directory recursively

```bash
grep -r "TODO" .
```

---

### ğŸ”¹ Only show filenames

```bash
grep -rl "TODO" .
```

---

### ğŸ”¹ Ignore binary files

```bash
grep -rI "TODO" .
```

---

## ğŸŸ¥ 8. CONTEXT LINES (super important for logs)

Useful when checking logs around errors.

---

### ğŸ”¹ Show 3 lines BEFORE match

```bash
grep -B 3 "ERROR" app.log
```

---

### ğŸ”¹ Show 3 lines AFTER match

```bash
grep -A 3 "ERROR" app.log
```

---

### ğŸ”¹ Show 3 lines before & after

```bash
grep -C 3 "ERROR" app.log
```

Output:

```ini
INFO User logged in
INFO Request sent
ERROR Connection failed
INFO Retrying...
INFO Timeout
```

---

## ğŸŸ§ 9. COUNT MATCHES

---

### ğŸ”¹ Count lines that match

```bash
grep -c "ERROR" app.log
```

---

### ğŸ”¹ Count how many files contain pattern

```bash
grep -rl "ERROR" . | wc -l
```

---

## ğŸŸ¨ 10. MATCH MULTIPLE PATTERNS

### ğŸ”¹ Using `-e`

```bash
grep -e "ERROR" -e "CRITICAL" app.log
```

---

### ğŸ”¹ Using regex

```bash
grep -E "ERROR|CRITICAL" app.log
```

---

## ğŸŸ¦ 11. MATCH ENTIRE FILES (binary, unreadable)

### ğŸ”¹ Treat binary as text

```bash
grep -a "password" binaryfile
```

---

### ğŸ”¹ Show if file contains match (no lines)

```bash
grep -q "secret" file.txt
```

Return codes:

| Meaning     | Code |
| ----------- | ---- |
| Match found | 0    |
| No match    | 1    |
| Error       | 2    |

Perfect for scripts:

```bash
if grep -q "ERROR" app.log; then
    echo "Error detected!"
fi
```

---

## ğŸŸ© 12. GREP WITH PIPELINES

---

### ğŸ”¹ Filter output of other commands

```bash
ps aux | grep nginx
```

---

### ğŸ”¹ Get only network lines

```bash
ip a | grep inet
```

---

### ğŸ”¹ Find failed login attempts

```bash
journalctl -u ssh | grep "Failed"
```

---

### ğŸ”¹ Filter Kubernetes logs

```bash
kubectl logs app | grep "ERROR"
```

---

## ğŸŸª 13. NEGATIVE GREP (double invert)

Remove all lines **except errors**:

```bash
grep -E "ERROR|CRITICAL" app.log | grep -v "DEBUG"
```

---

## ğŸŸ« 14. ADVANCED REGEX (for pros)

Enable extended regex:

```bash
grep -E "pattern"
```

Examples:

---

### Match email addresses

```bash
grep -E "[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,}" file.txt
```

---

### Match dates YYYY-MM-DD

```bash
grep -E "[0-9]{4}-[0-9]{2}-[0-9]{2}" file.txt
```

---

### Match function definitions (C-like)

```bash
grep -E "^[a-zA-Z_][a-zA-Z0-9_]*\(" code.c
```

---

## ğŸ§  15. REAL DEVOPS EXAMPLES

### âœ” K8s: find pods in CrashLoopBackOff

```bash
kubectl get pods | grep CrashLoopBackOff
```

---

### âœ” Logs: filter only errors (ignore INFO)

```bash
grep -v "INFO" /var/log/app.log | grep "ERROR"
```

---

### âœ” CI/CD: check version string

```bash
grep -E "version: [0-9]+\.[0-9]+" build.yaml
```

---

### âœ” Search environment variables

```bash
env | grep "AWS"
```

---

### âœ” Search Java stack trace sections

```bash
grep -A 10 -B 4 "Exception" app.log
```

---

### âœ” Get only failed requests from NGINX logs

```bash
grep " 500 " access.log
```

---

### âœ” Extract failed authentication attempts

```bash
grep "Failed password" /var/log/auth.log
```

---

## ğŸ§© CHEAT SHEET

| Purpose              | Command               |
| -------------------- | --------------------- |
| Basic search         | `grep "text" file`    |
| Ignore case          | `grep -i`             |
| Line numbers         | `grep -n`             |
| Whole words          | `grep -w`             |
| Count matches        | `grep -c`             |
| Recursive            | `grep -r`             |
| Filenames only       | `grep -l`             |
| Inverse match        | `grep -v`             |
| Show context         | `grep -A`, `-B`, `-C` |
| Regex OR             | `grep -E "a \| b"`    |
| Binary treat as text | `grep -a`             |
| Quiet mode           | `grep -q`             |
| Highlight            | `grep --color`        |
