# ğŸ”— **Linux Links**

In Linux, a **file is not the name you see**.

A file is actually:

- **An inode** â†’ contains the _real_ data (metadata + disk blocks)
- **A directory entry** â†’ the name you see, pointing to an inode

Think of it like this:

```ini
Filename  â”€â”€â”€â”€â”€â”€â”€â–º Inode â”€â”€â”€â”€â”€â”€â”€â–º File Data on disk
```

A file can have **multiple names** pointing to the _same inode_.

These names are called **links**.

There are two types:

1. ğŸ“Œ **Hard links**
2. ğŸ§· **Soft links (symbolic links)**

Letâ€™s break them down.

---

## ğŸ“Œ **1. Hard Links** â€” The Real Twins ğŸ‘¯â€â™‚ï¸

A **hard link** is a _direct pointer_ to the same inode as the original file.

Meaning:

- âœ” Both files share the same data
- âœ” Deleting one does NOT delete the data
- âœ” They are 100% equal â€” no â€œoriginal vs copyâ€
- âœ” Cannot hard-link to directories
- âœ” Cannot hard-link across filesystems

---

### ğŸŸ¦ Create a hard link

```bash
ln original.txt hardlink.txt
```

---

### ğŸŸ¦ Verify using `ls -li`

Use `-i` to show inode numbers.

#### â–¶ï¸ Example

```bash
ls -li
```

#### ğŸ“¤ Expected Output

```text
12345 -rw-r--r-- 2 user user  20 Jan 20 10:00 original.txt
12345 -rw-r--r-- 2 user user  20 Jan 20 10:00 hardlink.txt
```

Notice:

- **Same inode number (`12345`)**
- **Link count is 2**
- Both point to the _exact same file_

---

### ğŸŸ¦ Modify one â€” both change

```bash
echo "Hello" >> original.txt
cat hardlink.txt
```

#### ğŸ“¤ Output

```text
Hello
```

Because they share the same data block.

---

### ğŸŸ¦ Delete the â€œoriginalâ€

```bash
rm original.txt
cat hardlink.txt
```

#### ğŸ“¤ Output

```text
Hello
```

The file still exists through `hardlink.txt`.

> ğŸ’¡ Hard links make data _immortal_ unless **all** links are removed.

---

### âš™ï¸ **Hard Link Internals**

inode is like and object in memory, and file is a pointer to it.  
so you can have more than one point to same object in same object.  
but once all reference removed, then GC will delete the object from memory.(not really delete, just mark as deleted)

#### ğŸŸ¦ Step 1

<div align="center" style="background-color:#11171F; border-radius: 10px; border: 2px solid">
    <img src="image/1764268215345.png" alt="Login Methods" style="width: 80%">
</div>

#### ğŸŸ¦ Step 2

<div align="center" style="background-color:#11171F; border-radius: 10px; border: 2px solid">
    <img src="image/1764268260217.png" alt="Login Methods" style="width: 80%">
</div>

#### ğŸŸ¦ Step 3

<div align="center" style="background-color:#11171F; border-radius: 10px; border: 2px solid">
    <img src="image/1764268296035.png" alt="Login Methods" style="width: 80%">
</div>

#### ğŸŸ¦ Step 4

<div align="center" style="background-color:#11171F; border-radius: 10px; border: 2px solid">
    <img src="image/1764268331681.png" alt="Login Methods" style="width: 80%">
</div>

> Marked as deleted, so os will overwrite new data to it.

### âš ï¸ **Hard Links Limitations**

- Hard links are limited to **only files**
- Hard links are limited to **one filesystem**

<div align="center" style="background-color:#11171F; border-radius: 10px; border: 2px solid">
    <img src="image/1764268473475.png" alt="Login Methods" style="width: 80%">
</div>

---

## ğŸ§· **2. Soft Links (Symbolic Links)** â€” The Shortcut Files ğŸ“

A **soft link** is NOT the same inode.
It is:

- A _separate file_
- That contains a _path_ pointing to the original file
- Very similar to Windows shortcuts

---

<div align="center" style="background-color:#11171F; border-radius: 10px; border: 2px solid">
    <img src="image/1764283490764.png" alt="Login Methods" style="width: 80%">
</div>

<div align="center" style="background-color:#11171F; border-radius: 10px; border: 2px solid">
    <img src="image/1764283557242.png" alt="Login Methods" style="width: 80%">
</div>

### ğŸŸ© Create a soft link

```bash
ln -s original.txt softlink.txt
```

---

### ğŸŸ© Check with `ls -l`

#### â–¶ï¸ Example

```bash
ls -l
```

#### ğŸ“¤ Expected Output

```text
lrwxrwxrwx 1 user user  13 Jan 20 10:05 softlink.txt -> original.txt
-rw-r--r-- 1 user user  20 Jan 20 10:00 original.txt
```

- The first character `l` means: **this is a link**
- The arrow `->` shows the target

Soft link contains **path**, not data.

---

### ğŸŸ© Modify one â€” original changes, link reflects it

```bash
echo "New line" >> original.txt
cat softlink.txt
```

#### ğŸ“¤ Output

```text
New line
```

---

### ğŸŸ© If original file is deletedâ€¦

```bash
rm original.txt
cat softlink.txt
```

#### ğŸ“¤ Output

```text
cat: softlink.txt: No such file or directory
```

The soft link becomes a **broken link** ğŸ”¥ğŸ’”

---

## âš”ï¸ **Hard Link vs Soft Link**

<div align="center" style="background-color: #255560ff; border-radius: 10px; border: 2px solid">

| Feature                     | Hard Link    | Soft Link (Symbolic)           |
| --------------------------- | ------------ | ------------------------------ |
| Points to                   | inode        | file path                      |
| Breaks if original deleted  | âŒ No        | âœ… Yes                         |
| Link count increases        | âœ… Yes       | âŒ No                          |
| Can link across filesystems | âŒ No        | âœ… Yes                         |
| Works with directories      | âŒ No        | âš ï¸ Yes (but not commonly used) |
| Uses extra inode            | âŒ No        | âœ… Yes                         |
| File size                   | Same as file | Size of path (few bytes)       |

</div>

---

## ğŸ§ª **Practical Hands-On Example**

Letâ€™s do everything in one sequence.

---

### 1ï¸âƒ£ Create a file

```bash
echo "data" > file.txt
```

---

### 2ï¸âƒ£ Create hard + soft links

```bash
ln file.txt file_hard.txt
ln -s file.txt file_soft.txt
```

---

### 3ï¸âƒ£ Check inode numbers

```bash
ls -li
```

#### Output:

```text
1001 -rw-r--r-- 2 user user 5 Jan 20 12:00 file.txt
1001 -rw-r--r-- 2 user user 5 Jan 20 12:00 file_hard.txt
1002 lrwxrwxrwx 1 user user 8 Jan 20 12:00 file_soft.txt -> file.txt
```

Observations:

- Hard link â†’ same inode (`1001`)
- Soft link â†’ different inode (`1002`)

---

### 4ï¸âƒ£ Delete original

```bash
rm file.txt
```

---

### 5ï¸âƒ£ Test remaining links

#### Hard link

```bash
cat file_hard.txt
```

Output:

```text
data
```

Still works ğŸ‘Œ

---

#### Soft link

```bash
cat file_soft.txt
```

Output:

```text
cat: file_soft.txt: No such file or directory
```

Broken ğŸ’”

---

## ğŸ¯ **Summary**

- **Hard link** = true clone of the inode
- **Soft link** = shortcut file pointing to a path
- Hard links: reliable, identical twins
- Soft links: lightweight, flexible, but fragile
- Hard links cannot cross filesystems, soft links can
- Deleting original breaks only soft links
