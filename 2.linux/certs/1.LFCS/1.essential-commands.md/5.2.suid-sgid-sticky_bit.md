# ðŸ”¥ Special Permissions in Linux (SUID, SGID, Sticky Bit)

Beyond the normal permissions (`rwx`), Linux has **three special permission bits**:

- **SUID** (Set User ID)
- **SGID** (Set Group ID)
- **Sticky Bit**

These change how **execution**, **file creation**, and **deletion rules** work.

Letâ€™s break each one with perfect clarity. ðŸ‘‡

---

## ðŸ”´ 1. SUID (Set User ID)

SUID makes a program run **as the file owner**, _not_ the user who runs it.

- âœ” Applies **only to files** (executables/scripts)
- âœ” Shown as **`s`** in the **ownerâ€™s execute position**

---

### ðŸ§© Where SUID appears

Normal permissions:

```ini
rwx r-x r-x
```

With SUID enabled:

```ini
rws r-x r-x
```

Or lowercase **s** if owner has no execute permission:

```ini
rwS r-x r-x
```

---

### ðŸŸ¥ What SUID does

When you run a file with SUID:

âž¡ The program gets **ownerâ€™s privileges**
âž¡ Useful for tasks requiring elevated rights

---

### ðŸŸ¦ Classic Example: The `passwd` command

Run:

```bash
ls -l /usr/bin/passwd
```

Expected output:

```text
-rwsr-xr-x 1 root root 54256 Apr  3 2024 /usr/bin/passwd
```

Notice:

```ini
rws   â†’ SUID bit is ON for owner (root)
```

Why?

- Updating `/etc/shadow` requires **root** privileges
- `passwd` allows normal users to change their passwords
- SUID makes the program run as **root**, safely

---

### ðŸŸª Enable SUID

```bash
chmod u+s filename
```

Example:

```bash
chmod u+s myscript.sh
```

---

### ðŸŸª Remove SUID

```bash
chmod u-s filename
```

---

### ðŸŸª Numeric representation (octal)

SUID = **4**

Example:

```bash
chmod 4755 app
```

The leading `4` activates SUID:

```ini
4 755
^ ^
| â””â”€ normal permissions
â””â”€â”€ special bit
```

---

## ðŸŸ¡ 2. SGID (Set Group ID)

SGID affects **group permissions**.

- âœ” Applies to **files** _and_ **directories**
- âœ” Appears as **`s`** in the group execute position

---

### ðŸŸ¨ SGID on Files

A file with SGID:

```ini
rwx r-s r-x
```

Effect:

âž¡ When executed, the program runs with the **group ownerâ€™s privileges**.

This is similar to SUID, but for group.

---

### ðŸŸ¨ SGID on Directories (VERY IMPORTANT)

SGID on a directory:

```ini
rwx r-s r-x
```

Meaning:

âž¡ **All new files inside inherit the directoryâ€™s group**, NOT the userâ€™s default group.

This is extremely useful for:

- Shared project directories
- Dev teams
- Git repos
- `www-data` and nginx/apache folders

---

### ðŸ§© Example: Shared dev folder

```bash
sudo mkdir /project
sudo chgrp devs /project
sudo chmod 2775 /project
```

Why `2`?

SGID = **2** â†’ for directories

Permissions now:

```text
drwxrwsr-x user devs /project
```

Note the **s** in group field.

Effect:

- Any new file created inside `/project` automatically belongs to the `devs` group.

Example:

```bash
cd /project
touch test.txt
ls -l test.txt
```

Output:

```text
-rw-r--r-- user devs test.txt
```

Inherited the directoryâ€™s group (**devs**) automatically!

---

### ðŸŸ¦ Enable SGID

```bash
chmod g+s dirname
```

---

### ðŸŸ¦ Remove SGID

```bash
chmod g-s dirname
```

---

### ðŸŸ¦ Numeric representation

SGID = **2**

Example:

```bash
chmod 2755 dirname
```

---

## ðŸŸ¢ 3. Sticky Bit â€” Only Owner Can Delete

Sticky bit is used on **directories only**, especially **shared directories**.

- âœ” Appears as **`t`** in "others" execute position
- âœ” Prevents users from deleting each otherâ€™s files

---

### ðŸŸ¢ Where Sticky Bit appears

Normal directory:

```ini
drwxrwxrwx
```

Sticky bit enabled:

```ini
drwxrwxrwt
```

The final **t** is the sticky bit.

---

### ðŸ§© Real-life example: `/tmp`

Check it:

```bash
ls -ld /tmp
```

Output:

```text
drwxrwxrwt 10 root root 4096 Jan 21 14:22 /tmp
```

Why?

Because `/tmp` is world-writable:

- Everyone can write
- But only the **owner** of a file may delete/rename it

If sticky bit wasnâ€™t here, _anyone_ could delete _any file_ in `/tmp` â†’ chaos ðŸ˜…

---

### ðŸŸ¢ Enable Sticky Bit

```bash
chmod +t directory
```

Example:

```bash
chmod +t /shared
```

---

### ðŸŸ¢ Remove Sticky Bit

```bash
chmod -t directory
```

---

### ðŸŸ¢ Numeric representation

Sticky bit = **1**

Example:

```bash
chmod 1777 shared_folder
```

Produces:

```ini
drwxrwxrwt
```

---

## ðŸ§¨ Summary Table (Your Style)

| Feature         | Applies To  | Symbol                 | Octal | Effect                  |
| --------------- | ----------- | ---------------------- | ----- | ----------------------- |
| **SUID**        | Files       | `s` in owner position  | 4xxx  | Run as owner            |
| **SGID (file)** | Files       | `s` in group position  | 2xxx  | Run as group            |
| **SGID (dir)**  | Directories | `s` in group position  | 2xxx  | New files inherit group |
| **Sticky bit**  | Directories | `t` in others position | 1xxx  | Only owner can delete   |

---

## ðŸ§© Combined Example (All in One)

```bash
chmod 4755 file_with_suid
chmod 2755 dir_with_sgid
chmod 1777 shared_folder
```

Creates:

```ini
-rwsr-xr-x   file_with_suid       â†’ SUID enabled
drwxrwsr-x   dir_with_sgid        â†’ SGID directory
drwxrwxrwt   shared_folder        â†’ Sticky bit folder
```
