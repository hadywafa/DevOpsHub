# üß¨ Docker Container Lifecycle (Overview)

Before we deep-dive into each command, here‚Äôs the big picture:

Each step = a **real Docker command**, and each one manages the **state** of a container:

- Created üß±
- Running üèÉ
- Paused üí§
- Stopped ‚èπÔ∏è
- Removed ‚ùå

---

## 1Ô∏è‚É£ `docker container create` ‚Äî Create but Don‚Äôt Start

### üß† What It Does

Creates a container **from an image** but **does not start it yet**.

The container gets:

- Its own **filesystem** (from image)
- A unique **Container ID**
- Metadata (env vars, ports, volumes, etc.)
- But **no process** is running yet!

---

### üß± Syntax

```bash
docker container create [OPTIONS] IMAGE [COMMAND] [ARG...]
```

Example:

```bash
docker container create --name myubuntu ubuntu
```

Result:

```ini
5a3b2a63e1e9a...   # ‚Üê container ID (created but not running)
```

---

### ‚öôÔ∏è Common Options (Same as `docker run`)

| Option      | Description                            | Example                    |
| ----------- | -------------------------------------- | -------------------------- |
| `--name`    | Assign a custom name                   | `--name web01`             |
| `-p`        | Map port                               | `-p 8080:80`               |
| `-v`        | Mount volume                           | `-v /data:/app/data`       |
| `-e`        | Set environment variable               | `-e MODE=prod`             |
| `--network` | Connect to a network                   | `--network mynet`          |
| `--restart` | Restart policy                         | `--restart unless-stopped` |
| `--user`    | Run as a specific user                 | `--user 1000:1000`         |
| `--workdir` | Set working directory inside container | `--workdir /app`           |

---

### üì¶ Example: Pre-configure a Container

```bash
docker container create \
  --name myapp \
  -p 8080:80 \
  -v /mydata:/var/www/html \
  -e ENV=prod \
  nginx
```

You now have a container ready to run:

```bash
docker start myapp
```

---

### üß© When to Use

| Scenario            | Why Use `create`                             |
| ------------------- | -------------------------------------------- |
| Automated systems   | You want to prepare container config first   |
| CI/CD               | Pre-define containers and start them later   |
| Volume/network prep | Attach resources before starting             |
| Testing             | Quickly duplicate config without running yet |

---

### üß† Note (Key Difference from `run`)

| `docker run`                                 | `docker create`           |
| -------------------------------------------- | ------------------------- |
| Creates **and** starts container immediately | Only creates it           |
| Shortcut = `create + start`                  | First step only           |
| More common for interactive work             | More common in automation |

---

### üîç See Created Containers

```bash
docker ps -a
```

Output:

```ini
CONTAINER ID   IMAGE    STATUS
5a3b2a63e1e9   ubuntu   Created
```

---

## 2Ô∏è‚É£ `docker container start` ‚Äî Start a Stopped/Created Container

### üß† What It Does

Starts a container that was:

- Created (via `docker create`)
- Or previously stopped

> Think of it as pressing the **power button** on a virtual machine üíª

---

### üß± Syntax

```bash
docker container start [OPTIONS] CONTAINER [CONTAINER...]
```

Example:

```bash
docker container start myubuntu
```

---

### ‚öôÔ∏è Common Options

| Option | Description                         | Example                  |
| ------ | ----------------------------------- | ------------------------ |
| `-a`   | Attach terminal to container output | `docker start -a myapp`  |
| `-i`   | Attach STDIN (interactive input)    | `docker start -ai myapp` |

---

### üì¶ Example

```bash
docker container create --name test ubuntu sleep 10
docker container start -ai test
```

It will run `sleep 10` ‚Üí then exit.
If you run it **without `-a`**, it runs silently in the background.

---

### üß© When to Use

| Case                        | Use It                            |
| --------------------------- | --------------------------------- |
| Start an existing container | ‚úÖ Yes                            |
| Restart after crash         | ‚úÖ Yes                            |
| Want to see output directly | Add `-a`                          |
| Multiple containers         | `docker start web01 db01 cache01` |

---

## 3Ô∏è‚É£ `docker container stop` ‚Äî Gracefully Stop

### üß† What It Does

Sends **SIGTERM** signal ‚Üí gives process time to clean up.
If not stopped in 10 seconds ‚Üí sends **SIGKILL** to force stop.

> Think: ‚ÄúPolitely ask it to shut down.‚Äù

---

### üß± Syntax

```bash
docker container stop [OPTIONS] CONTAINER [CONTAINER...]
```

Example:

```bash
docker container stop myapp
```

---

### ‚öôÔ∏è Common Options

| Option | Description                                     | Example                   |
| ------ | ----------------------------------------------- | ------------------------- |
| `-t`   | Seconds to wait before force kill (default 10s) | `docker stop -t 20 myapp` |

---

### üì¶ Example

```bash
docker container stop -t 5 nginx
```

Waits 5 seconds before sending SIGKILL if process doesn‚Äôt exit.

---

### üß© When to Use

| Situation             | Explanation                   |
| --------------------- | ----------------------------- |
| Graceful app shutdown | ‚úÖ Yes (safest)               |
| Batch shutdowns       | `docker stop $(docker ps -q)` |
| Controlled cleanup    | Better than `kill`            |

---

## 4Ô∏è‚É£ `docker container kill` ‚Äî Force Stop (Immediate)

### üß† What It Does

Sends **SIGKILL** immediately ‚Äî kills the process **without cleanup**.

> Think: ‚ÄúPull the plug out of the wall üíÄ‚Äù

---

### üß± Syntax

```bash
docker container kill [OPTIONS] CONTAINER [CONTAINER...]
```

Example:

```bash
docker container kill myapp
```

---

### ‚öôÔ∏è Common Options

| Option     | Description                            | Example           |
| ---------- | -------------------------------------- | ----------------- |
| `--signal` | Send a specific signal instead of KILL | `--signal SIGINT` |

---

### üß© When to Use

| Use Case          | Why                                 |
| ----------------- | ----------------------------------- |
| Container hung    | Force terminate immediately         |
| Testing           | See how system recovers after crash |
| Emergency cleanup | Skip graceful stop                  |

---

## 5Ô∏è‚É£ `docker container restart` ‚Äî Stop + Start Again

### üß† What It Does

Performs:

```ini
stop ‚Üí start
```

Useful after updating configs, volumes, or debugging.

> Think: ‚ÄúReboot my app.‚Äù

---

### üß± Syntax

```bash
docker container restart [OPTIONS] CONTAINER [CONTAINER...]
```

Example:

```bash
docker container restart -t 5 myapp
```

---

### ‚öôÔ∏è Common Option

| Option | Description                                | Example |
| ------ | ------------------------------------------ | ------- |
| `-t`   | Timeout before force killing (default 10s) | `-t 3`  |

---

### üß© When to Use

| Scenario           | Why                   |
| ------------------ | --------------------- |
| Apply new settings | Restart picks them up |
| Recover from crash | Restart cleanly       |
| CI/CD pipelines    | Refresh environments  |

---

## 6Ô∏è‚É£ `docker container pause` / `unpause`

### üß† What It Does

- `pause` ‚Üí Suspends all processes (using **cgroups freezer**)
- `unpause` ‚Üí Resumes them

> Think: ‚ÄúFreeze time ‚è∏Ô∏è ‚Ä¶ then resume ‚ñ∂Ô∏è‚Äù

---

### üß± Syntax

```bash
docker container pause CONTAINER
docker container unpause CONTAINER
```

Example:

```bash
docker pause myapp
docker unpause myapp
```

---

### üß© When to Use

| Case                         | Reason                   |
| ---------------------------- | ------------------------ |
| Temporarily freeze CPU usage | Debugging or maintenance |
| System overload              | Free up CPU instantly    |
| Short maintenance windows    | Pause > unpause later    |

---

## 7Ô∏è‚É£ `docker container rm` ‚Äî Remove Container

### üß† What It Does

Deletes a container (can‚Äôt remove if running unless `-f`).

> Think: ‚ÄúDelete the virtual machine.‚Äù

---

### üß± Syntax

```bash
docker container rm [OPTIONS] CONTAINER [CONTAINER...]
```

---

### ‚öôÔ∏è Common Options

| Option | Description                     | Example              |
| ------ | ------------------------------- | -------------------- |
| `-f`   | Force remove (kills if running) | `docker rm -f nginx` |
| `-v`   | Remove anonymous volumes        | `docker rm -v nginx` |

---

### üì¶ Example

```bash
docker container rm -f myapp
```

Or remove all stopped:

```bash
docker container prune
```

---

### üß© When to Use

| Scenario                       | Action                          |
| ------------------------------ | ------------------------------- |
| Clean old stopped containers   | ‚úÖ `docker rm $(docker ps -aq)` |
| Force delete running container | ‚úÖ `docker rm -f myapp`         |
| Free disk space                | ‚úÖ `docker container prune`     |

---

## ‚öôÔ∏è Lifecycle Summary Table

| Command   | Action           | Description                       | Common Options                          |
| --------- | ---------------- | --------------------------------- | --------------------------------------- |
| `create`  | Born             | Prepare container but don‚Äôt start | `--name`, `-v`, `-e`, `-p`, `--network` |
| `start`   | Wake             | Start a stopped/created container | `-a`, `-i`                              |
| `stop`    | Gracefully sleep | Send SIGTERM ‚Üí SIGKILL            | `-t`                                    |
| `kill`    | Force kill       | Send SIGKILL immediately          | `--signal`                              |
| `restart` | Reboot           | Stop + Start                      | `-t`                                    |
| `pause`   | Freeze           | Suspend CPU processes             | ‚Äî                                       |
| `unpause` | Resume           | Continue paused processes         | ‚Äî                                       |
| `rm`      | Delete           | Remove container from system      | `-f`, `-v`                              |

---

## üß≠ Visual Recap: Lifecycle Flow

<div align="center">

```mermaid
---
config:
  theme: dark
  look: handDrawn
title: "Docker Container Lifecycle Summary"
---
flowchart LR
    A["create"] --> B["start"]
    B --> C["pause"]
    C --> D["unpause"]
    B --> E["stop"]
    E --> F["restart"]
    F --> B
    E --> G["rm"]
    B -.-> H["kill (force stop)"]
```

</div>
